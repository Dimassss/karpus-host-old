class CyclesDAO extends DAO{constructor(){super()}dispalyCycles(e,t,a){var r=new CycleTableSQL,i=new CyclesOutput;r.select(e,t,e=>{let t={};for(var r=0;r<e.length;r++)t[e[r].id]=e[r].name;i.insertData("C_CL1",t),i.insertData("C_CL2",t),a&&a()})}fillCycleWindows(e,t){var a=new CycleTableSQL,r=this;r.cleanCycleWindows(),a.load([e],a=>{a[0];(new CyclesOutput).insertData("C_ID",e),(new OrderTableSQL).select("cycleID LIKE ?",[JSON.stringify(e)],a=>{r.fillOrdersWin(a.map(e=>e.id)),(new KitTableSQL).select("cycleID = ?",[e],a=>{r.fillKitsWin(a.map(e=>e.id)),(new ProductTableSQL).select("cycleID = ?",[e],e=>{r.fillProductsWin(e.map(e=>e.id),t)})})})})}cleanCycleWindows(){(new CyclesOutput).insertData("C_ID","-1"),this.cleanOrdersWin(),this.cleanKitsWin(),this.cleanProductsWin()}fillOrdersWin(e,t){var a=new OrderTableSQL,r=new CyclesOutput;function i(e,t){switch(t){case"kits":return Object.keys(e.kits).join(", ");case"products":return Object.keys(e.kits).map(t=>t+": ["+e.kits[t].products.map(e=>e.name+": "+e.count).join(", ")+"]").join("<br>");case"pays":case"payDates":return e[t].shift(),e[t].join(", ");default:return e[t]}}a.load(e,e=>{let a=["fullName","telephone","kits","products","adress","summary","billed","pays","payDates","orderNotes","socialMedia"];var n={body:[]};(new CustomerTableSQL).load(e.map(e=>e.customerID),t=>{let s={};t.forEach(e=>s[e.id]=e.fullName),e.forEach((t,a)=>e[a].fullName=s[t.customerID]),e.forEach(e=>{let t=[];t[t.length]={id:e.id};for(var r=0;r<a.length;r++)t[t.length]=[i(e,a[r]),1,1];console.log(e),n.body[n.body.length]=t}),r.insertData("O_Tbl",n)}),t&&t()})}cleanOrdersWin(){(new CyclesOutput).insertData("O_Tbl",{body:-1})}fillKitsWin(e,t){var a=new KitTableSQL,r=new CyclesOutput,i={body:[]};a.load(e,e=>{for(var n=0;n<e.length;n++){var s=[{id:e[n].id,cycleID:e[n].cycleID}];for(var c in a.v)"id"!=c&&"cycleID"!=c&&("name"!=c&&"type"!=c&&"price"!=c||(s[s.length]="price"==c?[null!=e[n][c]?e[n][c]:e[n].pcPrice,1,1]:[e[n][c],1,1],i.body[i.body.length]=Array.from(s)))}r.insertData("K_Tbl",i),t&&t()})}cleanKitsWin(){var e=new CyclesOutput;this.cleanKitProfile(),e.insertData("K_Tbl",{body:-1})}fillProductsWin(e,t){var a=new ProductTableSQL,r=new CyclesOutput;const i=["name","unit","count","price","dimensions","weight","description"];var n={body:[]};console.log(a.v,i),a.load(e,e=>{for(var a=0;a<e.length;a++){var s=[{id:e[a].id,cycleID:e[a].cycleID}];for(var c in i)if("id"!=i[c]&&"cycleID"!=i[c]){const t=i[c];if("count"==t||"price"==t)for(var l in e[a][t])s[s.length]=[e[a][t][l],1,1];else null==e[a][t]?s[s.length]=["",1,1]:"object"==typeof e[a][t]?s[s.length]=[e[a][t].join(" * "),1,1]:s[s.length]=[e[a][t],1,1]}n.body[n.body.length]=Array.from(s)}r.insertData("P_Tbl",n),t&&t()})}cleanProductsWin(){var e=new CyclesOutput;this.cleanProductProfile(),e.insertData("P_Tbl",{body:-1})}fillOrderCreatingWin(e,t){var a=new OrderTableSQL,r=new CustomerTableSQL,i=new CycleTableSQL,n=new KitTableSQL,s=new CyclesOutput;a.load([e],c=>{var l=c[0];if(!l)return!1;r.load([l.customerID],r=>{let c=r[0];c?(s.insertData("Cstm_ID",c.id),s.insertData("AW_Nm",c.fullName),s.insertData("AW_Pr",c.preferences),s.insertData("AW_Tel",[l.telephone[0],...c.telephones.filter(e=>e!=l.telephone[0])]),s.insertData("AW_SM",[l.socialMedia[0],...c.socialMedia.filter(e=>e!=l.socialMedia[0])]),s.insertData("AW_Adr",[l.adress[0],...c.adresses.filter(e=>e!=l.adress[0])]),s.insertData("AW_ID",l.id),s.insertData("AW_ON",l.orderNotes),s.insertData("AW_Sum",l.summary),s.insertData("AW_Bill","true"==l.billed),s.insertData("AW_n_ths","true"==l.isNotThis),s.insertData("AW_an_FN","true"==l.isNotThis?l.anotherFullName:""),s.insertData("AW_an_Tel","true"==l.isNotThis?l.anotherTelephone:""),s.insertData("AW_P",l.payDates.map((e,t)=>[e,l.pays[t]])),s.insertData("AW_kits",{}),i.select("TRUE",[],e=>{var a=e.find(e=>e.id==l.cycleID),r=e.filter(e=>e.id!=l.cycleID);s.insertData("AW_c_id",[[a.id,a.name],...r.map(e=>[e.id,e.name])]),n.select("cycleID = ?",[l.cycleID],e=>{(new ProductTableSQL).select("cycleID = ?",[l.cycleID],a=>{e.forEach((t,r)=>{let i={};e[r].products.forEach((e,t)=>i[e.name]=t),e[r].products=a.map(t=>{if(void 0!==i[t.name]){let a=e[r].products[i[t.name]];t.price.selected=a.price.selected,t.count=a.count}else t.price.selected=t.price["p-kt"],t.count=0;return JSON.parse(JSON.stringify(t))});var n=l.kits[t.name];if(!n)return!1;e[r].count="number"==typeof n.count?n.count:0,e[r].price="number"==typeof n.price?n.price:e[r].price;var s={};n.products.forEach((e,t)=>s[e.name]=t);let c=0,o=0;t.products.forEach((e,a)=>{void 0!==s[e.name]?(e.count=n.products[s[e.name]].count,e.price.selected=n.products[s[e.name]].price.selected,e.count>0&&(c+=e.count*e.price[e.price.selected],o+=e.weight*e.count)):(e.count=0,e.price.selected="p-kt"),t.products[a]=Object.assign({},e)}),console.log(t,c,o),t.pcPrice=c,t.pcWeight=o});var r={};e.forEach(e=>{console.log(e),r[e.name]=JSON.parse(JSON.stringify(e))}),s.insertData("AW_kits",r),s.insertData("AW_SumPC",e.filter(e=>e.count>0).map(e=>e.count*(e.price?e.price:e.pcPrice)).reduce((e,t)=>e+t,0)+" uah"),t&&t()})})})):(s.insertData("O_Tbl",{body:[[{id:e}]]}),a.del([e]))})})}updateOrderForm(e){let t=new CyclesOutput;for(var a in e)e[a].name=a;let r=Object.values(e).filter(e=>e.count>0).map(e=>[e.count*(e.price?e.price:e.pcPrice),e.name]);t.insertData("AW_SumPC",r.map(e=>e[0]).reduce((e,t)=>e+t,0)+" uah"),r.forEach(a=>{t.insertData("AW_KtPC",[e[a[1]].pcPrice,e[a[1]].pcWeight,a[1]])})}fillKitProfile(e,t){var a=new KitTableSQL,r=new CyclesOutput;a.load([e],e=>{let a=e[0]?e[0]:{name:"",price:0,pcPrice:0,type:"",size:"",dimensions:[0,0,0],weight:0,pcWeight:0,description:"",products:[],progressBars:[0,0]};(new ProductTableSQL).select("cycleID = ?",[t],e=>{let t={};a.products.forEach((e,a)=>t[e.name]=a),a.products=e.map(e=>{if(void 0!==t[e.name]){let r=a.products[t[e.name]];e.price.selected=r.selected,e.count=r.count}else e.price.selected=e.price["p-kt"],e.count=0;return e}),(e=>{r.insertData("K_ID",e.id),r.insertData("K_Nm",e.name),r.insertData("K_Pr",e.price),r.insertData("K_PcPr",Number(e.pcPrice.toFixed(2))),r.insertData("K_Tp",e.type),r.insertData("K_Sz",e.size),r.insertData("K_Dm",e.dimensions),r.insertData("K_W",e.weight),r.insertData("K_PcW",Number(e.pcWeight.toFixed(2))),r.insertData("K_D",e.description),r.insertData("K_Cr",e)})(a)})})}cleanKitProfile(e){var t=new CyclesOutput;t.insertData("K_ID",""),t.insertData("K_Nm",""),t.insertData("K_Pr",0),t.insertData("K_PcPr",0),t.insertData("K_Tp",""),t.insertData("K_Sz",""),t.insertData("K_Dm",[0,0,0]),t.insertData("K_W",0),t.insertData("K_PcW",0),t.insertData("K_D",""),(new ProductTableSQL).select("cycleID = ?",[e],e=>{t.insertData("K_Cr",{products:e,progress_bars:[0,0]})})}fillProductProfile(e){var t=new ProductTableSQL,a=new CyclesOutput;t.load([e],e=>{let t=e[0];t=t||{name:"",unit:"",count:{},price:{},dimensions:[0,0,0],weight:0,description:""},a.insertData("P_ID",t.id),a.insertData("P_Nm",t.name),a.insertData("P_Unt",t.unit),a.insertData("P_C",t.count),a.insertData("P_Pr",t.price),a.insertData("P_Dm",t.dimensions),a.insertData("P_W",t.weight),a.insertData("P_D",t.description)})}cleanProductProfile(){var e=new CyclesOutput,t="",a="",r="",i={"c-st":0,"c-wh":0,"c-sh":0,"c-kt":0,"c-or":0,"c-lft":0},n={"p-wh":0,"p-sh":0,"p-rst":0,"p-kt":0},s=[0,0,0],c=0,l="";e.insertData("P_Nm",a),e.insertData("P_ID",t),e.insertData("P_Unt",r),e.insertData("P_C",i),e.insertData("P_Pr",n),e.insertData("P_Dm",s),e.insertData("P_W",c),e.insertData("P_D",l)}createCycle(e,t,a){var r=new CycleTableSQL;r.load([e],i=>{let n=-1!=e?i[0]:new CycleModel({name:t,kitsID:[],ordersID:[],productsID:[]});r.save([n],e=>{a(e[0].id)})})}closeOrderCreatingWindow(){document.querySelector(".alert-window").style.display="none"}openOrderCreatingWindow(){document.querySelector(".alert-window").style.display="block"}getOrderFromPage(e,t){var a=new CyclesInput,r=new OrderModel({id:a.takeData("AW_ID"),cycleID:a.takeData("AW_c_id"),telephone:a.takeData("AW_Tel"),socialMedia:a.takeData("AW_SM"),adress:a.takeData("AW_Adr"),orderNotes:a.takeData("AW_ON"),summary:a.takeData("AW_Sum"),billed:a.takeData("AW_Bill"),isNotThis:a.takeData("AW_n_ths"),payDates:a.takeData("AW_PD"),pays:a.takeData("AW_Pay"),customerID:a.takeData("Cstm_ID"),anotherFullName:a.takeData("AW_an_FN"),anotherTelephone:a.takeData("AW_an_Tel"),kits:a.takeData("AW_kits")});if(t)return r.kits;const i=a.takeData("AW_P");let n=i.map(e=>e[0]),s=i.map(e=>e[1]);r.pays=n,r.payDates=s,(new CustomerTableSQL).load([r.customerID],t=>{if(t[0]){let i=t[0];i.telephones.find(e=>e==r.telephone[0])||i.telephones.push(r.telephone[0]),i.adresses.find(e=>e==r.adress[0])||i.adresses.push(r.adress[0]),i.socialMedia.find(e=>e==r.socialMedia[0])||i.socialMedia.push(r.socialMedia[0]),i.preferences=a.takeData("AW_Pr"),e(r,i)}})}saveOrder(e){this.fillOrdersWin(e.id),(new OrderTableSQL).save([e],()=>{})}saveCustomer(e){(new CustomerTableSQL).save([e],()=>{})}displayKits(e){var t=new CyclesOutput;new CycleTableSQL;(new KitTableSQL).select("cycleID = ?",[e],a=>{var r={};(new ProductTableSQL).select("cycleID = ?",[e],e=>{for(var i in a){let t=a[i],n={};t.products.forEach((e,t)=>n[e.name]=t),t.products=e.map(e=>{if(void 0!==n[e.name]){let a=t.products[n[e.name]];e.price.selected=a.selected,e.count=a.count}else e.price.selected=e.price["p-kt"],e.count=0;return e}),a[i].count||(a[i].count=0),r[a[i].name]=JSON.parse(JSON.stringify(t))}t.insertData("AW_kits",r)})})}deleteCycle(e){let t=new CyclesOutput,a=new OrderTableSQL,r=new KitTableSQL,i=new ProductTableSQL,n=new CycleTableSQL,s={};s[e]=!1,t.insertData("C_CL1",s),t.insertData("C_CL2",s),a.select("cycleID LIKE ?",[JSON.stringify(e+"")],t=>{r.select("cycleID = ?",[e],s=>{i.select("cycleID = ?",[e],c=>{a.del(t.map(e=>e.id)),r.del(s.map(e=>e.id)),i.del(c.map(e=>e.id)),n.del([e])})})})}addToArray(e,t){if(!e)return!1;let a=new CyclesInput,r=new CyclesOutput,i=a.takeData(e);r.insertData(e,[t,...i])}takeProductFromPage(){var e=new CyclesInput;let t=e.takeData("P_ID");return new ProductModel({id:t||void 0,cycleID:e.takeData("C_ID"),name:e.takeData("pr_Nm"),unit:e.takeData("pr_Unt"),price:e.takeData("pr_p"),count:e.takeData("pr_c"),dimensions:e.takeData("pr_Dm"),weight:e.takeData("pr_w"),description:e.takeData("pr_d")})}takeKitFromPage(){var e=new CyclesInput;let t=e.takeData("K_ID");return new KitModel({id:t||void 0,cycleID:e.takeData("C_ID"),name:e.takeData("kt_Nm"),price:e.takeData("kt_Pr"),weight:e.takeData("kt_w"),description:e.takeData("kt_d"),size:e.takeData("kt_Sz"),type:e.takeData("kt_Tp"),dimensions:e.takeData("kt_Dm"),...e.takeData("kt_prs")})}getCurrentCycleID(){return(new CyclesInput).takeData("C_ID")}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRBTy9DeWNsZXNEQU8uanMiXSwibmFtZXMiOlsiQ3ljbGVzREFPIiwiREFPIiwiW29iamVjdCBPYmplY3RdIiwic3VwZXIiLCJ3aGVyZSIsImRhdGEiLCJjYiIsImRiQ3ljbGUiLCJDeWNsZVRhYmxlU1FMIiwib3V0IiwiQ3ljbGVzT3V0cHV0Iiwic2VsZWN0IiwiY3ljbGVzIiwiaHRtbCIsImkiLCJsZW5ndGgiLCJpbnNlcnREYXRhIiwiY3ljbGVJRCIsImRiIiwiX3RoaXMiLCJ0aGlzIiwiY2xlYW5DeWNsZVdpbmRvd3MiLCJsb2FkIiwiT3JkZXJUYWJsZVNRTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcmRlcnMiLCJmaWxsT3JkZXJzV2luIiwibWFwIiwibyIsImlkIiwiS2l0VGFibGVTUUwiLCJraXRzIiwiZmlsbEtpdHNXaW4iLCJQcm9kdWN0VGFibGVTUUwiLCJwcm9kdWN0cyIsImZpbGxQcm9kdWN0c1dpbiIsImNsZWFuT3JkZXJzV2luIiwiY2xlYW5LaXRzV2luIiwiY2xlYW5Qcm9kdWN0c1dpbiIsImtleXMiLCJjb252ZXJ0RmllbGQiLCJjIiwiT2JqZWN0Iiwiam9pbiIsImtpdE5hbWUiLCJwciIsIm5hbWUiLCJjb3VudCIsInNoaWZ0IiwiY29sdW1ucyIsInRhYmxlT2JqZWN0IiwiYm9keSIsIkN1c3RvbWVyVGFibGVTUUwiLCJvciIsImN1c3RvbWVySUQiLCJjdXN0b21lcnMiLCJuYW1lTWFwIiwiZm9yRWFjaCIsImZ1bGxOYW1lIiwib3JkZXIiLCJyb3ciLCJjb25zb2xlIiwibG9nIiwiY29sIiwidiIsInBjUHJpY2UiLCJBcnJheSIsImZyb20iLCJjbGVhbktpdFByb2ZpbGUiLCJjb2xzIiwiaiIsImNsZWFuUHJvZHVjdFByb2ZpbGUiLCJvcmRlcklEIiwiZGJPcmRlciIsImRiQ3VzdG9tZXIiLCJkYktpdCIsImN1c3RvbWVyIiwiZmlsdGVyIiwidGVsIiwibWVkaWEiLCJhZHJlc3MiLCJkIiwic2VsZWN0ZWRDeWNsZSIsImZpbmQiLCJjeWNsZSIsInJlc3RDeWNsZXMiLCJraXRzRnJvbURCIiwia2l0IiwiaWRNYXAiLCJrUHIiLCJwcmljZSIsInNlbGVjdGVkIiwicGFyc2UiLCJvcmRlcktpdCIsIm5hbWVzIiwicGNXZWlnaHQiLCJ1bmRlZmluZWQiLCJ3ZWlnaHQiLCJhc3NpZ24iLCJraXRzRGF0YSIsInJlZHVjZSIsImEiLCJiIiwiZGVsIiwiayIsInZhbHVlcyIsImUiLCJraXRJRCIsInR5cGUiLCJzaXplIiwiZGltZW5zaW9ucyIsImRlc2NyaXB0aW9uIiwicHJvZ3Jlc3NCYXJzIiwiTnVtYmVyIiwidG9GaXhlZCIsImZpbGxQcm9maWxlIiwicHJvZ3Jlc3NfYmFycyIsInByb2R1Y3RJRCIsInByb2R1Y3QiLCJ1bml0IiwiYy1zdCIsImMtd2giLCJjLXNoIiwiYy1rdCIsImMtb3IiLCJjLWxmdCIsInAtd2giLCJwLXNoIiwicC1yc3QiLCJwLWt0IiwiQ3ljbGVNb2RlbCIsImtpdHNJRCIsIm9yZGVyc0lEIiwicHJvZHVjdHNJRCIsInNhdmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJyZXR1cm5Pbmx5S2l0cyIsImlucCIsIkN5Y2xlc0lucHV0IiwiT3JkZXJNb2RlbCIsInRha2VEYXRhIiwidGVsZXBob25lIiwic29jaWFsTWVkaWEiLCJvcmRlck5vdGVzIiwic3VtbWFyeSIsImJpbGxlZCIsImlzTm90VGhpcyIsInBheURhdGVzIiwicGF5cyIsImFub3RoZXJGdWxsTmFtZSIsImFub3RoZXJUZWxlcGhvbmUiLCJwYXlEYXRhIiwiZGF0ZXMiLCJ0ZWxlcGhvbmVzIiwidCIsInB1c2giLCJhZHJlc3NlcyIsInByZWZlcmVuY2VzIiwib3JkZXJEQiIsImtpdERCIiwicHJvZHVjdERCIiwiY3ljbGVEQiIsIm9yZCIsImlucE5hbWUiLCJlbXAiLCJ2YWxzIiwiUHJvZHVjdE1vZGVsIiwiS2l0TW9kZWwiXSwibWFwcGluZ3MiOiJBQW1DQSxNQUFNQSxrQkFBa0JDLElBQ3RCQyxjQUNFQyxRQUdG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QUFTLFFBQzFCbEMsS0FBTStCLEVBQUlHLFNBQVMsU0FDbkJuQyxLQUFNZ0MsRUFBSUcsU0FBUyxTQUNuQmpDLFdBQVk4QixFQUFJRyxTQUFTLFlBQ3RCSCxFQUFJRyxTQUFTLFlBSXBCOUksb0JBRUUsT0FEVSxJQUFJNEksYUFDSEUsU0FBUyIsImZpbGUiOiJEQU8vQ3ljbGVzREFPLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbkBjbGFzcyBDeWNsZXNEQU9cclxuQGRlc2MgZ2l2ZSBtZXRob2QgdG8gZWFzeSBtb2RlcmF0ZSBwYWdlIGFuZCBkYXRhIG9uIHRoaXMgcGFnZVxyXG5cclxuQG1ldGhvZHNcclxuICBAbWV0aG9kIGRpc3BhbHlDeWNsZXNcclxuICAgIEBwYXJhbSB7U3RyaW5nfSB3aGVyZVxyXG4gICAgQHBhcmFtIHtBcnJheX0gZGF0YVxyXG4gICAgQGRvIGRpc3BsYXkgc2VsZWN0ZWQgY3ljbGVzIHRvIGZvb3RlciBtZW51IG9mIGN5Y2xlcyBhbmQgdG8gc2VsZWN0IGxpc3QgaW4gZm9vdGVyXHJcbiAgQG1ldGhvZCBmaWxsQ3ljbGVXaW5kb3dzXHJcbiAgICBAcGFyYW0ge0ludGFnZXJ9IGN5Y2xlSURcclxuICAgIEBkbyBnZXQgb3JkZXJzLCBraXRzIGFuZCBwcm9kdWN0cyBmcm9tIGRiIG9mIHNlbGVjdGVkIGN5Y2xlIGFuZCBmaWxsIHRoYXQgZGF0YSB0byB3aW5kb3dzIE9yZGVycywgS2l0cyBhbmQgUHJvZHVjdHNcclxuICBAbWV0aG9kIGZpbGxPcmRlcnNXaW5cclxuICAgIEBwYXJhbSB7QXJyYXk8SW50YWdlcj59IGtleXNcclxuICAgIEBkbyBkaXNwbGF5IGFsbCBvcmRlcnMgdG8gdGhlIG9yZGVyIHRhYmxlIGluIG9yZGVycyB3aW5kb3dcclxuICBAbWV0aG9kIGZpbGxLaXRzV2luXHJcbiAgICBAcGFyYW0ge0FycmF5PEludGFnZXJ9IGtleXNcclxuICAgIEBkbyBkaXNwbGF5IGFsbCBraXRzIHRvIHRoZSBraXRzIG5hdiB0YWJsZSBpbiBLaXRzIFdpbmRvd1xyXG4gIEBtZXRob2QgZmlsbFByb2R1Y3RzV2luXHJcbiAgICBAcGFyYW0ge0FycmF5PEludGFnZXJ9IGtleXNcclxuICAgIEBkbyBkaXNwbGF5IGFsbCBwcm9kdWN0cyB0byB0aGUga2l0cyBuYXYgdGFibGUgaW4gUHJvZHVjdHMgV2luZG93XHJcbiAgQG1ldGhvZCBmaWxsT3JkZXJDcmVhdGluZ1dpbmRvd1xyXG4gICAgQHBhcmFtIHtJbnRhZ2VyfSBvcmRlcklEXHJcbiAgICBAZG8gZ2V0IGN1c3RvbWVyIGFuZCBvcmRlciBmcm9tIGRiIGFuZCB0aGVuIGZpbGwgYWxsIG5lZWRlZCBmaWVsZHMgaW4gb3JkZXIgY3JlYXRpbmcgd2luZG93XHJcbiAgQG1ldGhvZCBmaWxsS2l0UHJvZmlsZVxyXG4gICAgQHBhcmFtIHtJbnRhZ2VyfSBraXRJRFxyXG4gICAgQGRvIGdldCBraXQgZnJvbSBkYiBhbmQgZmlsbCBhbGwgZmllbGRzIG9mIGtpdCBwcm9maWxlIGluIEtpdHMgV2luZG93XHJcbiAgQG1ldGhvZCBmaWxsUHJvZHVjdFByb2ZpbGVcclxuICAgIEBwYXJhbSB7SW50YWdlcn0ga2l0SURcclxuICAgIEBkbyBnZXQgcHJvZHVjdCBmcm9tIGRiIGFuZCBmaWxsIGFsbCBmaWVsZHMgb2YgcHJvZHVjdCBwcm9maWxlIGluIFByb2R1Y3RzIFdpbmRvd1xyXG4gIEBtZXRob2QgY3JlYXRlQ3ljbGVcclxuICAgIEBwYXJhbSB7SW50YWdlcn0gaWRcclxuICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lXHJcbiAgICBAZG8gdXBkYXRlIGN5Y2xlIG5hbWUgb3IgY3JlYXRlIG5ldyBpZiAlaWQgPSAtMVxyXG4qL1xyXG5jbGFzcyBDeWNsZXNEQU8gZXh0ZW5kcyBEQU97XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBkaXNwYWx5Q3ljbGVzKHdoZXJlLCBkYXRhLCBjYil7XHJcbiAgICB2YXIgZGJDeWNsZSA9IG5ldyBDeWNsZVRhYmxlU1FMKCk7XHJcbiAgICB2YXIgb3V0ID0gbmV3IEN5Y2xlc091dHB1dCgpO1xyXG5cclxuICAgIGRiQ3ljbGUuc2VsZWN0KHdoZXJlLCBkYXRhLCBjeWNsZXMgPT4ge1xyXG4gICAgICBsZXQgaHRtbCA9IHt9O1xyXG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY3ljbGVzLmxlbmd0aDsgaSsrKSBodG1sW2N5Y2xlc1tpXVtcImlkXCJdXSA9IGN5Y2xlc1tpXVtcIm5hbWVcIl07XHJcblxyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIkNfQ0wxXCIsIGh0bWwpO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIkNfQ0wyXCIsIGh0bWwpO1xyXG5cclxuICAgICAgaWYoY2IpIGNiKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZpbGxDeWNsZVdpbmRvd3MoY3ljbGVJRCwgY2Ipe1xyXG4gICAgdmFyIGRiID0gbmV3IEN5Y2xlVGFibGVTUUwoKTtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBfdGhpcy5jbGVhbkN5Y2xlV2luZG93cygpO1xyXG5cclxuICAgIGRiLmxvYWQoW2N5Y2xlSURdLCBjeWNsZXMgPT4ge1xyXG4gICAgICBsZXQgY3ljbGUgPSBjeWNsZXNbMF07XHJcbiAgICAgIChuZXcgQ3ljbGVzT3V0cHV0KCkpLmluc2VydERhdGEoXCJDX0lEXCIsIGN5Y2xlSUQpO1xyXG5cclxuICAgICAgKG5ldyBPcmRlclRhYmxlU1FMKCkpLnNlbGVjdChgY3ljbGVJRCBMSUtFID9gLCBbSlNPTi5zdHJpbmdpZnkoY3ljbGVJRCldLCBvcmRlcnMgPT4ge1xyXG4gICAgICAgIF90aGlzLmZpbGxPcmRlcnNXaW4ob3JkZXJzLm1hcChvID0+IG8uaWQpKTtcclxuXHJcbiAgICAgICAgKG5ldyBLaXRUYWJsZVNRTCgpKS5zZWxlY3QoYGN5Y2xlSUQgPSA/YCwgW2N5Y2xlSURdLCBraXRzID0+IHtcclxuICAgICAgICAgIF90aGlzLmZpbGxLaXRzV2luKGtpdHMubWFwKG8gPT4gby5pZCkpO1xyXG5cclxuICAgICAgICAgIChuZXcgUHJvZHVjdFRhYmxlU1FMKCkpLnNlbGVjdChgY3ljbGVJRCA9ID9gLCBbY3ljbGVJRF0sIHByb2R1Y3RzID0+IHtcclxuXHJcbiAgICAgICAgICAgIF90aGlzLmZpbGxQcm9kdWN0c1dpbihwcm9kdWN0cy5tYXAobyA9PiBvLmlkKSwgY2IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbGVhbkN5Y2xlV2luZG93cygpe1xyXG4gICAgKG5ldyBDeWNsZXNPdXRwdXQoKSkuaW5zZXJ0RGF0YShcIkNfSURcIiwgXCItMVwiKTtcclxuICAgIHRoaXMuY2xlYW5PcmRlcnNXaW4oKTtcclxuICAgIHRoaXMuY2xlYW5LaXRzV2luKCk7XHJcbiAgICB0aGlzLmNsZWFuUHJvZHVjdHNXaW4oKVxyXG4gIH1cclxuXHJcbiAgZmlsbE9yZGVyc1dpbihrZXlzLCBjYil7XHJcbiAgICB2YXIgZGIgPSBuZXcgT3JkZXJUYWJsZVNRTCgpO1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIHZhciB0YWJsZU9iamVjdCA9IHtib2R5OltdfTtcclxuXHJcbiAgICBkYi5sb2FkKGtleXMsIG9yZGVycyA9PiB7XHJcbiAgICAgIGxldCBjb2x1bW5zID0gW1wiZnVsbE5hbWVcIiwgXCJ0ZWxlcGhvbmVcIiwgXCJraXRzXCIsIFwicHJvZHVjdHNcIiwgXCJhZHJlc3NcIiwgXCJzdW1tYXJ5XCIsIFwiYmlsbGVkXCIsIFwicGF5c1wiLCBcInBheURhdGVzXCIsIFwib3JkZXJOb3Rlc1wiLCBcInNvY2lhbE1lZGlhXCJdO1xyXG4gICAgICB2YXIgdGFibGVPYmplY3QgPSB7Ym9keTpbXX07XHJcblxyXG4gICAgICAobmV3IEN1c3RvbWVyVGFibGVTUUwoKSkubG9hZChvcmRlcnMubWFwKG9yID0+IG9yLmN1c3RvbWVySUQpLCBjdXN0b21lcnMgPT4ge1xyXG4gICAgICAgIGxldCBuYW1lTWFwID0ge307XHJcbiAgICAgICAgY3VzdG9tZXJzLmZvckVhY2goYyA9PiBuYW1lTWFwW2MuaWRdID0gYy5mdWxsTmFtZSk7XHJcbiAgICAgICAgb3JkZXJzLmZvckVhY2goKG9yLCBpKSA9PiBvcmRlcnNbaV0uZnVsbE5hbWUgPSBuYW1lTWFwW29yLmN1c3RvbWVySURdKTtcclxuXHJcbiAgICAgICAgb3JkZXJzLmZvckVhY2gob3JkZXIgPT4ge1xyXG4gICAgICAgICAgbGV0IHJvdyA9IFtdO1xyXG4gICAgICAgICAgcm93W3Jvdy5sZW5ndGhdID0ge2lkOiBvcmRlci5pZH07XHJcbiAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykgcm93W3Jvdy5sZW5ndGhdID0gW2NvbnZlcnRGaWVsZChvcmRlciwgY29sdW1uc1tpXSksIDEsIDFdO1xyXG4gICAgICAgICAgY29uc29sZS5sb2cob3JkZXIpO1xyXG4gICAgICAgICAgdGFibGVPYmplY3QuYm9keVt0YWJsZU9iamVjdC5ib2R5Lmxlbmd0aF0gPSByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG91dC5pbnNlcnREYXRhKFwiT19UYmxcIiwgdGFibGVPYmplY3QpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmKGNiKSBjYigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydEZpZWxkKG8sIGMpe1xyXG4gICAgICBzd2l0Y2goYyl7XHJcbiAgICAgICAgY2FzZSBcImtpdHNcIjpcclxuICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvLmtpdHMpLmpvaW4oXCIsIFwiKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJwcm9kdWN0c1wiOlxyXG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG8ua2l0cykubWFwKGtpdE5hbWUgPT4ga2l0TmFtZSArIFwiOiBbXCIgKyBvLmtpdHNba2l0TmFtZV0ucHJvZHVjdHMubWFwKHByID0+IHByLm5hbWUgKyBcIjogXCIgKyBwci5jb3VudCkuam9pbihcIiwgXCIpICsgXCJdXCIpLmpvaW4oXCI8YnI+XCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInBheXNcIjpcclxuICAgICAgICAgIG9bY10uc2hpZnQoKTtcclxuICAgICAgICAgIHJldHVybiBvW2NdLmpvaW4oXCIsIFwiKTtcclxuICAgICAgICBjYXNlIFwicGF5RGF0ZXNcIjpcclxuICAgICAgICAgIG9bY10uc2hpZnQoKTtcclxuICAgICAgICAgIHJldHVybiBvW2NdLmpvaW4oXCIsIFwiKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIG9bY107XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xlYW5PcmRlcnNXaW4oKXtcclxuICAgIHZhciBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcblxyXG4gICAgb3V0Lmluc2VydERhdGEoXCJPX1RibFwiLCB7Ym9keTogLTF9KTtcclxuICB9XHJcblxyXG4gIGZpbGxLaXRzV2luKGtleXMsIGNiKXtcclxuICAgIHZhciBkYiA9IG5ldyBLaXRUYWJsZVNRTCgpO1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIHZhciB0YWJsZU9iamVjdCA9IHtib2R5OltdfTtcclxuXHJcbiAgICBkYi5sb2FkKGtleXMsIGtpdHMgPT4ge1xyXG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwga2l0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgdmFyIHJvdyA9IFt7aWQ6IGtpdHNbaV1bXCJpZFwiXSwgY3ljbGVJRDoga2l0c1tpXVtcImN5Y2xlSURcIl19XTtcclxuICAgICAgICBmb3IodmFyIGNvbCBpbiBkYi52KSBpZihjb2wgIT0gXCJpZFwiICYmIGNvbCAhPSBcImN5Y2xlSURcIikgaWYoY29sID09IFwibmFtZVwiIHx8IGNvbCA9PSBcInR5cGVcIiB8fCBjb2wgPT0gXCJwcmljZVwiKXtcclxuICAgICAgICAgIGlmKGNvbCA9PSBcInByaWNlXCIpIHJvd1tyb3cubGVuZ3RoXSA9IFtraXRzW2ldW2NvbF0gIT0gbnVsbD9raXRzW2ldW2NvbF06a2l0c1tpXS5wY1ByaWNlLCAxLCAxXTtcclxuICAgICAgICAgIGVsc2Ugcm93W3Jvdy5sZW5ndGhdID0gW2tpdHNbaV1bY29sXSwgMSwgMV07XHJcbiAgICAgICAgICB0YWJsZU9iamVjdC5ib2R5W3RhYmxlT2JqZWN0LmJvZHkubGVuZ3RoXSA9IEFycmF5LmZyb20ocm93KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiS19UYmxcIiwgdGFibGVPYmplY3QpO1xyXG5cclxuICAgICAgaWYoY2IpIGNiKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsZWFuS2l0c1dpbigpe1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIHRoaXMuY2xlYW5LaXRQcm9maWxlKCk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIktfVGJsXCIsIHtib2R5OiAtMX0pO1xyXG4gIH1cclxuXHJcbiAgZmlsbFByb2R1Y3RzV2luKGtleXMsIGNiKXtcclxuICAgIHZhciBkYiA9IG5ldyBQcm9kdWN0VGFibGVTUUwoKTtcclxuICAgIHZhciBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcbiAgICBjb25zdCBjb2xzID0gW1wibmFtZVwiLCBcInVuaXRcIiwgXCJjb3VudFwiLCBcInByaWNlXCIsIFwiZGltZW5zaW9uc1wiLCBcIndlaWdodFwiLCBcImRlc2NyaXB0aW9uXCJdO1xyXG4gICAgdmFyIHRhYmxlT2JqZWN0ID0ge2JvZHk6W119O1xyXG4gICAgY29uc29sZS5sb2coZGIudiwgY29scyk7XHJcblxyXG4gICAgZGIubG9hZChrZXlzLCBwcm9kdWN0cyA9PiB7XHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwcm9kdWN0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgdmFyIHJvdyA9IFt7aWQ6IHByb2R1Y3RzW2ldW1wiaWRcIl0sIGN5Y2xlSUQ6IHByb2R1Y3RzW2ldW1wiY3ljbGVJRFwiXX1dO1xyXG4gICAgICAgIGZvcih2YXIgaiBpbiBjb2xzKSBpZihjb2xzW2pdICE9IFwiaWRcIiAmJiBjb2xzW2pdICE9IFwiY3ljbGVJRFwiKXtcclxuICAgICAgICAgIGNvbnN0IGNvbCA9IGNvbHNbal07XHJcbiAgICAgICAgICBpZihjb2wgPT0gXCJjb3VudFwiIHx8IGNvbCA9PSBcInByaWNlXCIpIGZvcih2YXIgYyBpbiBwcm9kdWN0c1tpXVtjb2xdKSByb3dbcm93Lmxlbmd0aF0gPSBbcHJvZHVjdHNbaV1bY29sXVtjXSwgMSwgMV07XHJcbiAgICAgICAgICBlbHNlIGlmKHByb2R1Y3RzW2ldW2NvbF0gPT0gbnVsbCkgcm93W3Jvdy5sZW5ndGhdID0gW1wiXCIsIDEsIDFdO1xyXG4gICAgICAgICAgZWxzZSBpZih0eXBlb2YgcHJvZHVjdHNbaV1bY29sXSA9PSBcIm9iamVjdFwiKSByb3dbcm93Lmxlbmd0aF0gPSBbcHJvZHVjdHNbaV1bY29sXS5qb2luKFwiICogXCIpLCAxLCAxXTtcclxuICAgICAgICAgIGVsc2Ugcm93W3Jvdy5sZW5ndGhdID0gW3Byb2R1Y3RzW2ldW2NvbF0sIDEsIDFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YWJsZU9iamVjdC5ib2R5W3RhYmxlT2JqZWN0LmJvZHkubGVuZ3RoXSA9IEFycmF5LmZyb20ocm93KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJQX1RibFwiLCB0YWJsZU9iamVjdCk7XHJcblxyXG4gICAgICBpZihjYikgY2IoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xlYW5Qcm9kdWN0c1dpbigpe1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIHRoaXMuY2xlYW5Qcm9kdWN0UHJvZmlsZSgpO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJQX1RibFwiLCB7Ym9keTogLTF9KTtcclxuICB9XHJcblxyXG4gIGZpbGxPcmRlckNyZWF0aW5nV2luKG9yZGVySUQsIGNiKXtcclxuICAgIHZhciBkYk9yZGVyID0gbmV3IE9yZGVyVGFibGVTUUwoKTtcclxuICAgIHZhciBkYkN1c3RvbWVyID0gbmV3IEN1c3RvbWVyVGFibGVTUUwoKTtcclxuICAgIHZhciBkYkN5Y2xlID0gbmV3IEN5Y2xlVGFibGVTUUwoKTtcclxuICAgIHZhciBkYktpdCA9IG5ldyBLaXRUYWJsZVNRTCgpO1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuXHJcbiAgICBkYk9yZGVyLmxvYWQoW29yZGVySURdLCBvcmRlcnMgPT4ge1xyXG4gICAgICB2YXIgb3JkZXIgPSBvcmRlcnNbMF07XHJcbiAgICAgIGlmKCFvcmRlcikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBkYkN1c3RvbWVyLmxvYWQoW29yZGVyLmN1c3RvbWVySURdLCBjdXN0b21lcnMgPT4ge1xyXG4gICAgICAgIGxldCBjdXN0b21lciA9IGN1c3RvbWVyc1swXTtcclxuXHJcbiAgICAgICAgaWYoIWN1c3RvbWVyKXtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiT19UYmxcIiwge2JvZHk6W1t7aWQ6IG9yZGVySUR9XV19KTtcclxuICAgICAgICAgIGRiT3JkZXIuZGVsKFtvcmRlcklEXSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAvL2ZpbGwgZmllbGRzIGZyb20gY3VzdG9tZXIgb2JqZWN0XHJcbiAgICAgICAgICBvdXQuaW5zZXJ0RGF0YShcIkNzdG1fSURcIiwgY3VzdG9tZXIuaWQpO1xyXG4gICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19ObVwiLCBjdXN0b21lcltcImZ1bGxOYW1lXCJdKTtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfUHJcIiwgY3VzdG9tZXJbXCJwcmVmZXJlbmNlc1wiXSk7XHJcbiAgICAgICAgICAvL2ZpbGwgZmllbGRzIGZyb20gY3VzdG9tZXIgYW5kIG9yZGVyIG9iamVjdHNcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfVGVsXCIsIFtvcmRlcltcInRlbGVwaG9uZVwiXVswXSwgLi4uY3VzdG9tZXJbXCJ0ZWxlcGhvbmVzXCJdLmZpbHRlcih0ZWwgPT4gdGVsICE9IG9yZGVyW1widGVsZXBob25lXCJdWzBdKV0pO1xyXG4gICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19TTVwiLCBbb3JkZXJbXCJzb2NpYWxNZWRpYVwiXVswXSwgLi4uY3VzdG9tZXJbXCJzb2NpYWxNZWRpYVwiXS5maWx0ZXIobWVkaWEgPT4gbWVkaWEgIT0gb3JkZXJbXCJzb2NpYWxNZWRpYVwiXVswXSldKTtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfQWRyXCIsIFtvcmRlcltcImFkcmVzc1wiXVswXSwgLi4uY3VzdG9tZXJbXCJhZHJlc3Nlc1wiXS5maWx0ZXIoYWRyZXNzID0+IGFkcmVzcyAhPSBvcmRlcltcImFkcmVzc1wiXVswXSldKTtcclxuICAgICAgICAgIC8vZmlsbCBmaWVsZHMgZnJvbSBvcmRlciBvYmplY3RcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfSURcIiwgb3JkZXJbXCJpZFwiXSk7XHJcbiAgICAgICAgICBvdXQuaW5zZXJ0RGF0YShcIkFXX09OXCIsIG9yZGVyW1wib3JkZXJOb3Rlc1wiXSk7XHJcbiAgICAgICAgICBvdXQuaW5zZXJ0RGF0YShcIkFXX1N1bVwiLCBvcmRlcltcInN1bW1hcnlcIl0pO1xyXG4gICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19CaWxsXCIsIG9yZGVyW1wiYmlsbGVkXCJdID09IFwidHJ1ZVwiKTtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfbl90aHNcIiwgb3JkZXJbXCJpc05vdFRoaXNcIl0gPT0gXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19hbl9GTlwiLCBvcmRlcltcImlzTm90VGhpc1wiXSA9PSBcInRydWVcIj9vcmRlcltcImFub3RoZXJGdWxsTmFtZVwiXTpcIlwiKTtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfYW5fVGVsXCIsIG9yZGVyW1wiaXNOb3RUaGlzXCJdID09IFwidHJ1ZVwiP29yZGVyW1wiYW5vdGhlclRlbGVwaG9uZVwiXTpcIlwiKTtcclxuICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfUFwiLCBvcmRlcltcInBheURhdGVzXCJdLm1hcCgoZCwgaSkgPT4gW2QsIG9yZGVyW1wicGF5c1wiXVtpXV0pKTtcclxuICAgICAgICAgIC8vY2xlYXIga2l0c1xyXG4gICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19raXRzXCIsIHt9KTtcclxuXHJcbiAgICAgICAgICBkYkN5Y2xlLnNlbGVjdChcIlRSVUVcIiwgW10sIGN5Y2xlcyA9PiB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEN5Y2xlID0gY3ljbGVzLmZpbmQoY3ljbGUgPT4gY3ljbGUuaWQgPT0gb3JkZXIuY3ljbGVJRCk7XHJcbiAgICAgICAgICAgIHZhciByZXN0Q3ljbGVzID0gY3ljbGVzLmZpbHRlcihjeWNsZSA9PiBjeWNsZS5pZCAhPSBvcmRlci5jeWNsZUlEKTtcclxuICAgICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19jX2lkXCIsIFsgW3NlbGVjdGVkQ3ljbGUuaWQsIHNlbGVjdGVkQ3ljbGUubmFtZV0sIC4uLnJlc3RDeWNsZXMubWFwKGN5Y2xlID0+IFtjeWNsZS5pZCwgY3ljbGUubmFtZV0pIF0pO1xyXG5cclxuICAgICAgICAgICAgZGJLaXQuc2VsZWN0KFwiY3ljbGVJRCA9ID9cIiwgW29yZGVyLmN5Y2xlSURdLCBraXRzRnJvbURCID0+IHtcclxuICAgICAgICAgICAgICAobmV3IFByb2R1Y3RUYWJsZVNRTCgpKS5zZWxlY3QoXCJjeWNsZUlEID0gP1wiLCBbb3JkZXIuY3ljbGVJRF0sIHByb2R1Y3RzID0+IHtcclxuICAgICAgICAgICAgICAgIGtpdHNGcm9tREIuZm9yRWFjaCgoa2l0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBpZE1hcCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICBraXRzRnJvbURCW2ldLnByb2R1Y3RzLmZvckVhY2goKHByLCBpKSA9PiBpZE1hcFtwci5uYW1lXSA9IGkpO1xyXG4gICAgICAgICAgICAgICAgICBraXRzRnJvbURCW2ldLnByb2R1Y3RzID0gcHJvZHVjdHMubWFwKHByID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgaWRNYXBbcHIubmFtZV0gIT0gXCJ1bmRlZmluZWRcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQga1ByID0ga2l0c0Zyb21EQltpXS5wcm9kdWN0c1tpZE1hcFtwci5uYW1lXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICBwci5wcmljZS5zZWxlY3RlZCA9IGtQci5wcmljZS5zZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICAgIHByLmNvdW50ID0ga1ByLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgcHIucHJpY2Uuc2VsZWN0ZWQgPSBwci5wcmljZVtcInAta3RcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICBwci5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHByKSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyS2l0ID0gb3JkZXIua2l0c1traXQubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgIGlmKCFvcmRlcktpdCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAga2l0c0Zyb21EQltpXS5jb3VudCA9ICh0eXBlb2Ygb3JkZXJLaXQuY291bnQgPT0gXCJudW1iZXJcIik/b3JkZXJLaXQuY291bnQ6MDtcclxuICAgICAgICAgICAgICAgICAga2l0c0Zyb21EQltpXS5wcmljZSA9ICh0eXBlb2Ygb3JkZXJLaXQucHJpY2UgPT0gXCJudW1iZXJcIik/KG9yZGVyS2l0LnByaWNlKTooa2l0c0Zyb21EQltpXS5wcmljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgbmFtZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgb3JkZXJLaXQucHJvZHVjdHMuZm9yRWFjaCgocHIsIGkpID0+IG5hbWVzW3ByLm5hbWVdID0gaSk7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBwY1ByaWNlID0gMDtcclxuICAgICAgICAgICAgICAgICAgbGV0IHBjV2VpZ2h0ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGtpdC5wcm9kdWN0cy5mb3JFYWNoKChwciwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5hbWVzW3ByLm5hbWVdICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgcHIuY291bnQgPSBvcmRlcktpdC5wcm9kdWN0c1tuYW1lc1twci5uYW1lXV0uY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwci5wcmljZS5zZWxlY3RlZCA9IG9yZGVyS2l0LnByb2R1Y3RzW25hbWVzW3ByLm5hbWVdXS5wcmljZS5zZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKHByLmNvdW50ID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBjUHJpY2UgKz0gcHIuY291bnQqcHIucHJpY2VbcHIucHJpY2Uuc2VsZWN0ZWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY1dlaWdodCArPSBwci53ZWlnaHQqcHIuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwci5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwci5wcmljZS5zZWxlY3RlZCA9IFwicC1rdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBraXQucHJvZHVjdHNbaV0gPSBPYmplY3QuYXNzaWduKHt9LCBwcik7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhraXQsIHBjUHJpY2UsIHBjV2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAga2l0LnBjUHJpY2UgPSBwY1ByaWNlO1xyXG4gICAgICAgICAgICAgICAgICBraXQucGNXZWlnaHQgPSBwY1dlaWdodDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBraXRzRGF0YSA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIGtpdHNGcm9tREIuZm9yRWFjaChraXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhraXQpO1xyXG4gICAgICAgICAgICAgICAgICBraXRzRGF0YVtraXQubmFtZV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGtpdCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0Lmluc2VydERhdGEoXCJBV19raXRzXCIsIGtpdHNEYXRhKTtcclxuICAgICAgICAgICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfU3VtUENcIiwgKGtpdHNGcm9tREIuZmlsdGVyKGtpdCA9PiBraXQuY291bnQgPiAwKS5tYXAoa2l0ID0+IGtpdC5jb3VudCooa2l0LnByaWNlP2tpdC5wcmljZTpraXQucGNQcmljZSkpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApKSArIFwiIHVhaFwiKTtcclxuICAgICAgICAgICAgICAgIGlmKGNiKSBjYigpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZU9yZGVyRm9ybShraXRzKXtcclxuICAgIGxldCBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcbiAgICBmb3IodmFyIGsgaW4ga2l0cykga2l0c1trXS5uYW1lID0gaztcclxuICAgIGxldCBkYXRhID0gT2JqZWN0LnZhbHVlcyhraXRzKS5maWx0ZXIoa2l0ID0+IGtpdC5jb3VudCA+IDApLm1hcChraXQgPT4gW2tpdC5jb3VudCooa2l0LnByaWNlP2tpdC5wcmljZTpraXQucGNQcmljZSksIGtpdC5uYW1lXSk7XHJcblxyXG4gICAgb3V0Lmluc2VydERhdGEoXCJBV19TdW1QQ1wiLCAoZGF0YS5tYXAoZSA9PiBlWzBdKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSkgKyBcIiB1YWhcIik7XHJcbiAgICBkYXRhLmZvckVhY2goZCA9PiB7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfS3RQQ1wiLCBba2l0c1tkWzFdXS5wY1ByaWNlLCBraXRzW2RbMV1dLnBjV2VpZ2h0LCBkWzFdXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBmaWxsS2l0UHJvZmlsZShraXRJRCwgY3ljbGVJRCl7XHJcbiAgICB2YXIgZGIgPSBuZXcgS2l0VGFibGVTUUwoKTtcclxuICAgIHZhciBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcbiAgICB2YXIgZmlsbFByb2ZpbGUgPSBraXQgPT4ge1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfSURcIiwga2l0W1wiaWRcIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfTm1cIiwga2l0W1wibmFtZVwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiS19QclwiLCBraXRbXCJwcmljZVwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiS19QY1ByXCIsIE51bWJlcigoa2l0W1wicGNQcmljZVwiXSkudG9GaXhlZCgyKSkpO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfVHBcIiwga2l0W1widHlwZVwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiS19TelwiLCBraXRbXCJzaXplXCJdKTtcclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJLX0RtXCIsIGtpdFtcImRpbWVuc2lvbnNcIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfV1wiLCBraXRbXCJ3ZWlnaHRcIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfUGNXXCIsIE51bWJlcigoa2l0W1wicGNXZWlnaHRcIl0pLnRvRml4ZWQoMikpKTtcclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJLX0RcIiwga2l0W1wiZGVzY3JpcHRpb25cIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIktfQ3JcIiwga2l0KTtcclxuICAgIH07XHJcbiAgICBkYi5sb2FkKFtraXRJRF0sIGtpdHMgPT4ge1xyXG4gICAgICBsZXQga2l0ID0ga2l0c1swXT9raXRzWzBdOntuYW1lOiBcIlwiLCBwcmljZTogMCwgcGNQcmljZTogMCwgdHlwZTogXCJcIiwgc2l6ZTogXCJcIiwgZGltZW5zaW9uczogWzAsMCwwXSwgd2VpZ2h0OiAwLCBwY1dlaWdodDogMCwgZGVzY3JpcHRpb246IFwiXCIsIHByb2R1Y3RzOltdLCBwcm9ncmVzc0JhcnM6WzAsIDBdfTtcclxuXHJcbiAgICAgIChuZXcgUHJvZHVjdFRhYmxlU1FMKCkpLnNlbGVjdChcImN5Y2xlSUQgPSA/XCIsIFtjeWNsZUlEXSwgcHJvZHVjdHMgPT4ge1xyXG4gICAgICAgIGxldCBpZE1hcCA9IHt9O1xyXG4gICAgICAgIGtpdC5wcm9kdWN0cy5mb3JFYWNoKChwciwgaSkgPT4gaWRNYXBbcHIubmFtZV0gPSBpKTtcclxuICAgICAgICBraXQucHJvZHVjdHMgPSBwcm9kdWN0cy5tYXAocHIgPT4ge1xyXG4gICAgICAgICAgaWYodHlwZW9mIGlkTWFwW3ByLm5hbWVdICE9IFwidW5kZWZpbmVkXCIpe1xyXG4gICAgICAgICAgICBsZXQga1ByID0ga2l0LnByb2R1Y3RzW2lkTWFwW3ByLm5hbWVdXTtcclxuICAgICAgICAgICAgcHIucHJpY2Uuc2VsZWN0ZWQgPSBrUHIuc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIHByLmNvdW50ID0ga1ByLmNvdW50O1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHByLnByaWNlLnNlbGVjdGVkID0gcHIucHJpY2VbXCJwLWt0XCJdO1xyXG4gICAgICAgICAgICBwci5jb3VudCA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcHI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZpbGxQcm9maWxlKGtpdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbGVhbktpdFByb2ZpbGUoY3ljbGVJRCl7XHJcbiAgICB2YXIgb3V0ID0gbmV3IEN5Y2xlc091dHB1dCgpO1xyXG5cclxuICAgIG91dC5pbnNlcnREYXRhKFwiS19JRFwiLCBcIlwiKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiS19ObVwiLCBcIlwiKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiS19QclwiLCAwKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiS19QY1ByXCIsIDApO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJLX1RwXCIsIFwiXCIpO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJLX1N6XCIsIFwiXCIpO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJLX0RtXCIsIFswLCAwLCAwXSk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIktfV1wiLCAwKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiS19QY1dcIiwgMCk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIktfRFwiLCBcIlwiKTtcclxuXHJcbiAgICAobmV3IFByb2R1Y3RUYWJsZVNRTCgpKS5zZWxlY3QoXCJjeWNsZUlEID0gP1wiLCBbY3ljbGVJRF0sIHByb2R1Y3RzID0+IHtcclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJLX0NyXCIsIHtwcm9kdWN0czpwcm9kdWN0cywgcHJvZ3Jlc3NfYmFyczogWzAsIDBdfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZpbGxQcm9kdWN0UHJvZmlsZShwcm9kdWN0SUQpe1xyXG4gICAgdmFyIGRiID0gbmV3IFByb2R1Y3RUYWJsZVNRTCgpO1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIGRiLmxvYWQoW3Byb2R1Y3RJRF0sIHByb2R1Y3RzID0+IHtcclxuICAgICAgbGV0IHByb2R1Y3QgPSBwcm9kdWN0c1swXTtcclxuICAgICAgcHJvZHVjdCA9IHByb2R1Y3Q/cHJvZHVjdDp7bmFtZTogXCJcIiwgdW5pdDogXCJcIiwgY291bnQ6IHt9LCBwcmljZToge30sIGRpbWVuc2lvbnM6IFswLDAsMF0sIHdlaWdodDogMCwgZGVzY3JpcHRpb246IFwiXCJ9O1xyXG5cclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJQX0lEXCIsIHByb2R1Y3RbXCJpZFwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiUF9ObVwiLCBwcm9kdWN0W1wibmFtZVwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiUF9VbnRcIiwgcHJvZHVjdFtcInVuaXRcIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIlBfQ1wiLCBwcm9kdWN0W1wiY291bnRcIl0pO1xyXG4gICAgICBvdXQuaW5zZXJ0RGF0YShcIlBfUHJcIiwgcHJvZHVjdFtcInByaWNlXCJdKTtcclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJQX0RtXCIsIHByb2R1Y3RbXCJkaW1lbnNpb25zXCJdKTtcclxuICAgICAgb3V0Lmluc2VydERhdGEoXCJQX1dcIiwgcHJvZHVjdFtcIndlaWdodFwiXSk7XHJcbiAgICAgIG91dC5pbnNlcnREYXRhKFwiUF9EXCIsIHByb2R1Y3RbXCJkZXNjcmlwdGlvblwiXSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsZWFuUHJvZHVjdFByb2ZpbGUoKXtcclxuICAgIHZhciBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcbiAgICB2YXIgcHJvZHVjdCA9IHtpZDogXCJcIixuYW1lOiBcIlwiLCB1bml0OiBcIlwiLCBjb3VudDoge1wiYy1zdFwiOjAsXCJjLXdoXCI6MCxcImMtc2hcIjowLFwiYy1rdFwiOjAsXCJjLW9yXCI6MCxcImMtbGZ0XCI6MH0sIHByaWNlOiB7XCJwLXdoXCI6MCxcInAtc2hcIjowLFwicC1yc3RcIjowLFwicC1rdFwiOjB9LCBkaW1lbnNpb25zOiBbMCwwLDBdLCB3ZWlnaHQ6IDAsIGRlc2NyaXB0aW9uOiBcIlwifTtcclxuXHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIlBfTm1cIiwgcHJvZHVjdFtcIm5hbWVcIl0pO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJQX0lEXCIsIHByb2R1Y3RbXCJpZFwiXSk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIlBfVW50XCIsIHByb2R1Y3RbXCJ1bml0XCJdKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiUF9DXCIsIHByb2R1Y3RbXCJjb3VudFwiXSk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIlBfUHJcIiwgcHJvZHVjdFtcInByaWNlXCJdKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiUF9EbVwiLCBwcm9kdWN0W1wiZGltZW5zaW9uc1wiXSk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIlBfV1wiLCBwcm9kdWN0W1wid2VpZ2h0XCJdKTtcclxuICAgIG91dC5pbnNlcnREYXRhKFwiUF9EXCIsIHByb2R1Y3RbXCJkZXNjcmlwdGlvblwiXSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDeWNsZShpZCwgbmFtZSwgY2Ipe1xyXG4gICAgdmFyIGRiID0gbmV3IEN5Y2xlVGFibGVTUUwoKTtcclxuXHJcbiAgICBkYi5sb2FkKFtpZF0sIGN5Y2xlcyA9PiB7XHJcbiAgICAgIGxldCBjeWNsZSA9IGlkICE9IC0xP2N5Y2xlc1swXTpuZXcgQ3ljbGVNb2RlbCh7bmFtZTogbmFtZSwga2l0c0lEOiBbXSwgb3JkZXJzSUQ6IFtdLCBwcm9kdWN0c0lEOiBbXX0pO1xyXG5cclxuICAgICAgZGIuc2F2ZShbY3ljbGVdLCBjeWNsZXMgPT4ge1xyXG4gICAgICAgIGNiKGN5Y2xlc1swXVtcImlkXCJdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlT3JkZXJDcmVhdGluZ1dpbmRvdygpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGVydC13aW5kb3dcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxuXHJcbiAgb3Blbk9yZGVyQ3JlYXRpbmdXaW5kb3coKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWxlcnQtd2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfVxyXG5cclxuICBnZXRPcmRlckZyb21QYWdlKGNiLCByZXR1cm5Pbmx5S2l0cyl7XHJcbiAgICB2YXIgaW5wID0gbmV3IEN5Y2xlc0lucHV0KCk7XHJcbiAgICB2YXIgb3JkZXIgPSBuZXcgT3JkZXJNb2RlbCh7XHJcbiAgICAgIGlkOiBpbnAudGFrZURhdGEoXCJBV19JRFwiKSxcclxuICAgICAgY3ljbGVJRDogaW5wLnRha2VEYXRhKFwiQVdfY19pZFwiKSxcclxuICAgICAgdGVsZXBob25lOiBpbnAudGFrZURhdGEoXCJBV19UZWxcIiksXHJcbiAgICAgIHNvY2lhbE1lZGlhOiBpbnAudGFrZURhdGEoXCJBV19TTVwiKSxcclxuICAgICAgYWRyZXNzOiBpbnAudGFrZURhdGEoXCJBV19BZHJcIiksXHJcbiAgICAgIG9yZGVyTm90ZXM6IGlucC50YWtlRGF0YShcIkFXX09OXCIpLFxyXG4gICAgICBzdW1tYXJ5OiBpbnAudGFrZURhdGEoXCJBV19TdW1cIiksXHJcbiAgICAgIGJpbGxlZDogaW5wLnRha2VEYXRhKFwiQVdfQmlsbFwiKSxcclxuICAgICAgaXNOb3RUaGlzOiBpbnAudGFrZURhdGEoXCJBV19uX3Roc1wiKSxcclxuICAgICAgcGF5RGF0ZXM6IGlucC50YWtlRGF0YShcIkFXX1BEXCIpLFxyXG4gICAgICBwYXlzOiBpbnAudGFrZURhdGEoXCJBV19QYXlcIiksXHJcbiAgICAgIGN1c3RvbWVySUQ6IGlucC50YWtlRGF0YShcIkNzdG1fSURcIiksXHJcbiAgICAgIGFub3RoZXJGdWxsTmFtZTogaW5wLnRha2VEYXRhKFwiQVdfYW5fRk5cIiksXHJcbiAgICAgIGFub3RoZXJUZWxlcGhvbmU6IGlucC50YWtlRGF0YShcIkFXX2FuX1RlbFwiKSxcclxuICAgICAga2l0czogaW5wLnRha2VEYXRhKFwiQVdfa2l0c1wiKVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYocmV0dXJuT25seUtpdHMpIHJldHVybiBvcmRlci5raXRzO1xyXG5cclxuICAgIGNvbnN0IHBheURhdGEgPSBpbnAudGFrZURhdGEoXCJBV19QXCIpO1xyXG4gICAgbGV0IHBheXMgPSBwYXlEYXRhLm1hcChkYXRhID0+IGRhdGFbMF0pO1xyXG4gICAgbGV0IGRhdGVzID0gcGF5RGF0YS5tYXAoZGF0YSA9PiBkYXRhWzFdKTtcclxuXHJcbiAgICBvcmRlci5wYXlzID0gcGF5cztcclxuICAgIG9yZGVyLnBheURhdGVzID0gZGF0ZXM7XHJcblxyXG4gICAgKG5ldyBDdXN0b21lclRhYmxlU1FMKCkpLmxvYWQoW29yZGVyLmN1c3RvbWVySURdLCBjdXN0b21lcnMgPT4ge1xyXG4gICAgICBpZihjdXN0b21lcnNbMF0pe1xyXG4gICAgICAgIGxldCBjdXN0b21lciA9IGN1c3RvbWVyc1swXTtcclxuICAgICAgICBpZighY3VzdG9tZXIudGVsZXBob25lcy5maW5kKHQgPT4gdD09b3JkZXIudGVsZXBob25lWzBdKSkgY3VzdG9tZXIudGVsZXBob25lcy5wdXNoKG9yZGVyLnRlbGVwaG9uZVswXSk7XHJcbiAgICAgICAgaWYoIWN1c3RvbWVyLmFkcmVzc2VzLmZpbmQobyA9PiBvPT1vcmRlci5hZHJlc3NbMF0pKSBjdXN0b21lci5hZHJlc3Nlcy5wdXNoKG9yZGVyLmFkcmVzc1swXSk7XHJcbiAgICAgICAgaWYoIWN1c3RvbWVyLnNvY2lhbE1lZGlhLmZpbmQobyA9PiBvPT1vcmRlci5zb2NpYWxNZWRpYVswXSkpIGN1c3RvbWVyLnNvY2lhbE1lZGlhLnB1c2gob3JkZXIuc29jaWFsTWVkaWFbMF0pO1xyXG4gICAgICAgIGN1c3RvbWVyLnByZWZlcmVuY2VzID0gaW5wLnRha2VEYXRhKFwiQVdfUHJcIik7XHJcbiAgICAgICAgY2Iob3JkZXIsIGN1c3RvbWVyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzYXZlT3JkZXIob3JkZXIpe1xyXG4gICAgdGhpcy5maWxsT3JkZXJzV2luKG9yZGVyW1wiaWRcIl0pO1xyXG4gICAgKG5ldyBPcmRlclRhYmxlU1FMKCkpLnNhdmUoW29yZGVyXSwgKCkgPT4ge30pO1xyXG4gIH1cclxuXHJcbiAgc2F2ZUN1c3RvbWVyKGN1c3RvbWVyKXtcclxuICAgIChuZXcgQ3VzdG9tZXJUYWJsZVNRTCgpKS5zYXZlKFtjdXN0b21lcl0sICgpID0+IHt9KTtcclxuICB9XHJcblxyXG4gIGRpc3BsYXlLaXRzKGN5Y2xlSUQpe1xyXG4gICAgdmFyIG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIHZhciBkYkN5Y2xlID0gbmV3IEN5Y2xlVGFibGVTUUwoKTtcclxuICAgIHZhciBkYktpdCA9IG5ldyBLaXRUYWJsZVNRTCgpO1xyXG5cclxuXHJcbiAgICBkYktpdC5zZWxlY3QoXCJjeWNsZUlEID0gP1wiLCBbY3ljbGVJRF0sIGtpdHMgPT4ge1xyXG4gICAgICB2YXIga2l0c0RhdGEgPSB7fTtcclxuXHJcbiAgICAgIChuZXcgUHJvZHVjdFRhYmxlU1FMKCkpLnNlbGVjdChcImN5Y2xlSUQgPSA/XCIsIFtjeWNsZUlEXSwgcHJvZHVjdHMgPT4ge1xyXG4gICAgICAgIGZvcih2YXIgayBpbiBraXRzKXtcclxuICAgICAgICAgIGxldCBraXQgPSBraXRzW2tdO1xyXG5cclxuICAgICAgICAgIGxldCBpZE1hcCA9IHt9O1xyXG4gICAgICAgICAga2l0LnByb2R1Y3RzLmZvckVhY2goKHByLCBpKSA9PiBpZE1hcFtwci5uYW1lXSA9IGkpO1xyXG4gICAgICAgICAga2l0LnByb2R1Y3RzID0gcHJvZHVjdHMubWFwKHByID0+IHtcclxuICAgICAgICAgICAgaWYodHlwZW9mIGlkTWFwW3ByLm5hbWVdICE9IFwidW5kZWZpbmVkXCIpe1xyXG4gICAgICAgICAgICAgIGxldCBrUHIgPSBraXQucHJvZHVjdHNbaWRNYXBbcHIubmFtZV1dO1xyXG4gICAgICAgICAgICAgIHByLnByaWNlLnNlbGVjdGVkID0ga1ByLnNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgIHByLmNvdW50ID0ga1ByLmNvdW50O1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICBwci5wcmljZS5zZWxlY3RlZCA9IHByLnByaWNlW1wicC1rdFwiXTtcclxuICAgICAgICAgICAgICBwci5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYoIWtpdHNba10uY291bnQpIGtpdHNba10uY291bnQgPSAwO1xyXG4gICAgICAgICAga2l0c0RhdGFba2l0c1trXVtcIm5hbWVcIl1dID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShraXQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG91dC5pbnNlcnREYXRhKFwiQVdfa2l0c1wiLCBraXRzRGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDeWNsZShjeWNsZUlEKXtcclxuICAgIGxldCBvdXQgPSBuZXcgQ3ljbGVzT3V0cHV0KCk7XHJcbiAgICBsZXQgb3JkZXJEQiA9IG5ldyBPcmRlclRhYmxlU1FMKCk7XHJcbiAgICBsZXQga2l0REIgPSBuZXcgS2l0VGFibGVTUUwoKTtcclxuICAgIGxldCBwcm9kdWN0REIgPSBuZXcgUHJvZHVjdFRhYmxlU1FMKCk7XHJcbiAgICBsZXQgY3ljbGVEQiA9IG5ldyBDeWNsZVRhYmxlU1FMKCk7XHJcbiAgICBsZXQgY3ljbGUgPSB7fTtcclxuXHJcbiAgICBjeWNsZVtjeWNsZUlEXSA9IGZhbHNlO1xyXG4gICAgb3V0Lmluc2VydERhdGEoXCJDX0NMMVwiLCBjeWNsZSk7XHJcbiAgICBvdXQuaW5zZXJ0RGF0YShcIkNfQ0wyXCIsIGN5Y2xlKTtcclxuXHJcbiAgICBvcmRlckRCLnNlbGVjdChgY3ljbGVJRCBMSUtFID9gLCBbSlNPTi5zdHJpbmdpZnkoY3ljbGVJRCtcIlwiKV0sIG9yZGVycyA9PiB7XHJcbiAgICAgIGtpdERCLnNlbGVjdChcImN5Y2xlSUQgPSA/XCIsIFtjeWNsZUlEXSwga2l0cyA9PiB7XHJcbiAgICAgICAgcHJvZHVjdERCLnNlbGVjdChcImN5Y2xlSUQgPSA/XCIsIFtjeWNsZUlEXSwgcHJvZHVjdHMgPT4ge1xyXG4gICAgICAgICAgb3JkZXJEQi5kZWwob3JkZXJzLm1hcChvcmQgPT4gb3JkLmlkKSk7XHJcbiAgICAgICAgICBraXREQi5kZWwoa2l0cy5tYXAoa2l0ID0+IGtpdC5pZCkpO1xyXG4gICAgICAgICAgcHJvZHVjdERCLmRlbChwcm9kdWN0cy5tYXAocHIgPT4gcHIuaWQpKTtcclxuICAgICAgICAgIGN5Y2xlREIuZGVsKFtjeWNsZUlEXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRUb0FycmF5KGlucE5hbWUsIGVtcCl7XHJcbiAgICBpZighaW5wTmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgbGV0IGlucCA9IG5ldyBDeWNsZXNJbnB1dCgpO1xyXG4gICAgbGV0IG91dCA9IG5ldyBDeWNsZXNPdXRwdXQoKTtcclxuICAgIGxldCB2YWxzID0gaW5wLnRha2VEYXRhKGlucE5hbWUpO1xyXG4gICAgb3V0Lmluc2VydERhdGEoaW5wTmFtZSwgW2VtcCwgLi4udmFsc10pO1xyXG4gIH1cclxuXHJcbiAgdGFrZVByb2R1Y3RGcm9tUGFnZSgpe1xyXG4gICAgdmFyIGlucCA9IG5ldyBDeWNsZXNJbnB1dCgpO1xyXG4gICAgbGV0IGlkID0gaW5wLnRha2VEYXRhKFwiUF9JRFwiKTtcclxuICAgIHJldHVybiBuZXcgUHJvZHVjdE1vZGVsKHtcclxuICAgICAgICAgIGlkOiBpZD9pZDp1bmRlZmluZWQsXHJcbiAgICAgICAgICBjeWNsZUlEOiBpbnAudGFrZURhdGEoXCJDX0lEXCIpLFxyXG4gICAgICAgICAgbmFtZTogaW5wLnRha2VEYXRhKFwicHJfTm1cIiksXHJcbiAgICAgICAgICB1bml0OiBpbnAudGFrZURhdGEoXCJwcl9VbnRcIiksXHJcbiAgICAgICAgICBwcmljZTogaW5wLnRha2VEYXRhKFwicHJfcFwiKSxcclxuICAgICAgICAgIGNvdW50OiBpbnAudGFrZURhdGEoXCJwcl9jXCIpLFxyXG4gICAgICAgICAgZGltZW5zaW9uczogaW5wLnRha2VEYXRhKFwicHJfRG1cIiksXHJcbiAgICAgICAgICB3ZWlnaHQ6IGlucC50YWtlRGF0YShcInByX3dcIiksXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogIGlucC50YWtlRGF0YShcInByX2RcIilcclxuICAgICAgICB9KTtcclxuICB9XHJcblxyXG4gIHRha2VLaXRGcm9tUGFnZSgpe1xyXG4gICAgdmFyIGlucCA9IG5ldyBDeWNsZXNJbnB1dCgpO1xyXG4gICAgbGV0IGlkID0gaW5wLnRha2VEYXRhKFwiS19JRFwiKTtcclxuICAgIHJldHVybiBuZXcgS2l0TW9kZWwoe1xyXG4gICAgICBpZDogaWQ/aWQ6dW5kZWZpbmVkLFxyXG4gICAgICBjeWNsZUlEOiBpbnAudGFrZURhdGEoXCJDX0lEXCIpLFxyXG4gICAgICBuYW1lOiBpbnAudGFrZURhdGEoXCJrdF9ObVwiKSxcclxuICAgICAgcHJpY2U6IGlucC50YWtlRGF0YShcImt0X1ByXCIpLFxyXG4gICAgICB3ZWlnaHQ6IGlucC50YWtlRGF0YShcImt0X3dcIiksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBpbnAudGFrZURhdGEoXCJrdF9kXCIpLFxyXG4gICAgICBzaXplOiBpbnAudGFrZURhdGEoXCJrdF9TelwiKSxcclxuICAgICAgdHlwZTogaW5wLnRha2VEYXRhKFwia3RfVHBcIiksXHJcbiAgICAgIGRpbWVuc2lvbnM6IGlucC50YWtlRGF0YShcImt0X0RtXCIpLFxyXG4gICAgICAuLi5pbnAudGFrZURhdGEoXCJrdF9wcnNcIiksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRDeWNsZUlEKCl7XHJcbiAgICBsZXQgaW5wID0gbmV3IEN5Y2xlc0lucHV0KCk7XHJcbiAgICByZXR1cm4gaW5wLnRha2VEYXRhKFwiQ19JRFwiKTtcclxuICB9XHJcbn1cclxuIl19
