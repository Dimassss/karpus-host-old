class CyclesInput extends Input{constructor(){function t(t){return document.querySelector(t)}function e(t){return document.querySelectorAll(t)}function r(e,r,n,i){if(!i)i=t(e);var c,s,o,l,a=0,u=0,p=[];o=parseInt(n(i.querySelector("h6 input[placeholder='Count']").value)),n(i.getAttribute("data-name")),c=i.querySelector("h6 input[placeholder='Price']").value?parseFloat(n(i.querySelector("h6 input[placeholder='Price']").value)):0,s=parseFloat(n(i.querySelector("h6 .weight").innerHTML)),l=[parseInt(i.querySelectorAll("h6 progress")[0].value),parseInt(i.querySelectorAll("h6 progress")[1].value)];for(var d=Array.from(i.querySelectorAll(".products-container .product")),v=0;v<d.length;v++){var w,y,h,_,g,j=d[v];w=n(j.querySelector("div:nth-child(1)").innerHTML),y=n(j.querySelector("div:nth-child(2)").innerHTML),h=(()=>{var t=j.querySelector("div:nth-child(3) select");if(t){var e={selected:t.value};return Array.from(t.options).forEach(t=>e[t.value]=parseFloat(t.innerText.split("-")[1])),Object.assign({},e)}})(),_=parseInt(n(j.querySelector("div input[placeholder='Count']").value)),g=parseFloat(n(j.querySelector("div:nth-child(2)").getAttribute("data-weight"))),p[p.length]={name:w,unit:y,price:h,count:_,weight:g},a+=("object"==typeof h?h[h.selected]:h)*_,u+=g*_}return Object.assign({},{price:c,pcPrice:Number(a.toFixed(2)),weight:s,pcWeight:Number(u.toFixed(2)),count:o,products:p,progress_bars:l})}if(g.Input.cycles)return g.Input.cycles;return super({t1:(e,r,n)=>{const i=n(t(e).value);if(r(i))return i;console.assert(!1,{field:e,class:"Cycles",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input",data:i})},t2:(e,r,n)=>{var i,c=t(e),s=0,o=0,l=[];i=[parseInt(c.querySelectorAll("h6 progress")[0].value),parseInt(c.querySelectorAll("h6 progress")[1].value)];for(var a=c.querySelectorAll(".products-container .product"),u=0;u<a.length;u++){var p,d,v,w,y,h=a[u];p=n(h.querySelector("div:nth-child(1)").innerHTML),d=n(h.querySelector("div:nth-child(2)").innerHTML),v=(v=(()=>{var t=h.querySelector("div:nth-child(3) select"),e={selected:t.value};return Array.from(t.options).forEach(t=>{e[t.value]=parseFloat(t.innerText.split("-")[1])}),Object.assign({},e)})())||parseFloat(n(h.querySelector("div:nth-child(3)").innerText)),w=0|parseFloat(n(h.querySelector("div input[placeholder='Count']").value)),y=parseFloat(n(h.querySelector("div:nth-child(2)").getAttribute("data-weight"))),l[l.length]={name:p,unit:d,price:v,count:w,weight:y},s+=(v[v.selected]|v)*w,o+=y*w}return Object.assign({},{pcPrice:s,pcWeight:o,products:l,progress_bars:i})},t3:(e,r,n)=>parseFloat(n(t(e).value)),t4:(t,r,n)=>{const i={};return e(t).forEach(t=>{i[n(t.getAttribute("data-type"))]=parseFloat(n(t.value))}),i},t5:(e,r,n)=>{const i=[],c=n(t(e)).split(" ");return i[0]=parseFloat(c[0]),i[1]=parseFloat(c[1]),i[2]=parseFloat(c[2]),i},t6:(e,r,n)=>parseInt(n(t(e).getAttribute("data-id"))),t7:(e,r,n)=>{let i=t(e);return console.log(i,e),i?[i.parentNode.parentNode.getAttribute("id"),parseInt(i.getAttribute("data-id")),i]:[]},t8:(e,r,n)=>n(t(e).value).split(" "),t9:(e,r,n)=>{const i=n(t(e).value);r(i)||console.error({field:e,class:"CustomerProfile",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input",input:i});let c=t(e).getAttribute("id");return[i,Array.from(t(e).parentNode.parentNode.parentNode.querySelectorAll("."+c+"-container .chip chip")).map(t=>n(t.innerHTML))]},t10:(e,r,n)=>n(t(e).checked),t11:(r,n,i)=>{const c=i(e(r)[0].value),s=i(e(r)[1].value);if(!n(c)||!n(s))throw{field:r,class:"CustomerProfile",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input",input:[c,s]};t(r).getAttribute("id");const o=Array.from(t(r).parentNode.parentNode.querySelectorAll(".chip chip")).map(t=>i(t.innerHTML).split(" - "));let l;return l=[[c,s]].concat(o),l},t12:(t,n,i)=>{const c={},s=Array.from(e(t));for(var o=0;o<s.length;o++){const e=parseInt(i(s[o].querySelector("h6 input[placeholder='Count']").value));e<1||!e||(c[i(s[o].getAttribute("data-name"))]=r(t,0,i,s[o]))}return c},t13:(e,r,n)=>parseInt(n(t(e).getAttribute("data-customer-id")))},{v:()=>!0,v1:t=>""!==t},[["Tbl_Slct","table tr.selected","v","t7"],["C_Slct","label.selected[for^=cycle-]","v","t7"],["P_ID",".w-products form","v","t6"],["K_ID",".w-kits form","v","t6"],["C_ID","section.cycles-container .cycle","v","t6"],["add_c",".cycles-tab-container .controll input[name=new-cycle-name]","v","t1"],["or_SF",".cycles-container .w-orders input#js-search-field","v","t1"],["kt_SF",".cycles-container .w-kits input#js-search-field","v","t1"],["kt_Nm",".cycles-container .w-kits input#js-kit-name","v","t1"],["kt_Pr",".cycles-container .w-kits input#js-kit-price","v","t3"],["kt_Tp",".cycles-container .w-kits input#js-kit-type","v","t1"],["kt_Sz",".cycles-container .w-kits input#js-kit-size","v","t1"],["kt_Dm",".cycles-container .w-kits input#js-kit-dimensions","v","t8"],["kt_w",".cycles-container .w-kits input#js-kit-weight","v","t3"],["kt_d",".cycles-container .w-kits textarea#js-kit-description","v","t1"],["kt_prs",".cycles-container .w-kits .kits .kit","v","t2"],["pr_SF",".cycles-container .w-products input#js-search-field","v","t1"],["pr_Nm",".cycles-container .w-products input#js-product-name","v","t1"],["pr_Unt",".cycles-container .w-products select#js-product-unit","v","t1"],["pr_c",".cycles-container .w-products table#js-product-count-set input","v","t4"],["pr_p",".cycles-container .w-products table#js-product-price-set input","v","t4"],["pr_Dm",".cycles-container .w-products input#js-product-dimensions","v","t8"],["pr_w",".cycles-container .w-products input#js-product-weight","v","t3"],["pr_d",".cycles-container .w-products textarea#js-product-description","v","t1"],["AW_ID",".alert-window","v","t6"],["AW_Tel",".alert-window input#js-telephones","v","t9"],["AW_SM",".alert-window input#js-social-media","v","t9"],["AW_ON",".alert-window textarea#js-order-notes","v","t1"],["AW_Pr",".alert-window textarea#js-order-preferences","v","t1"],["AW_Adr",".alert-window input#js-addresses","v","t9"],["AW_Sum",".alert-window input#js-summary","v","t1"],["AW_Bill",".alert-window input#js-is-billed","v","t10"],["AW_Pay",".alert-window input#js-order-paid","v1","t1"],["AW_P",".alert-window input#js-order-pay-date, .alert-window input#js-order-paid","v","t11"],["AW_PD",".alert-window input#js-order-pay-date","v1","t1"],["AW_c_id",".alert-window select#js-cycle","v","t1"],["AW_kits",".alert-window .kits .kit:not(.add)","v","t12"],["AW_n_ths",".alert-window input#js-is-not-this","v","t10"],["AW_an_FN",".alert-window input#js-another-full-name","v","t1"],["AW_an_Tel",".alert-window input#js-another-telephone","v","t1"],["Cstm_ID",".alert-window","v","t13"]]),g.Input.cycles=this}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIklucHV0cy9jeWNsZXMuanMiXSwibmFtZXMiOlsiQ3ljbGVzSW5wdXQiLCJJbnB1dCIsIltvYmplY3QgT2JqZWN0XSIsInEiLCJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicWEiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFrZV9nZXRLaXQiLCJ2IiwiciIsImtpdCIsInByaWNlIiwid2VpZ2h0IiwiY291bnQiLCJwcl9iYXIiLCJwY1ByaWNlIiwicGNXZWlnaHQiLCJwcm9kdWN0cyIsInBhcnNlSW50IiwidmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJwYXJzZUZsb2F0IiwiaW5uZXJIVE1MIiwicHJvZHVjdHNfaHRtbCIsIkFycmF5IiwiZnJvbSIsImoiLCJsZW5ndGgiLCJwX25hbWUiLCJwX3VuaXQiLCJwX3ByaWNlIiwicF9jb3VudCIsInBfd2VpZ2h0IiwicHJvZHVjdF9odG1sIiwic2VsZWN0IiwicmVzIiwic2VsZWN0ZWQiLCJvcHRpb25zIiwiZm9yRWFjaCIsIm9wIiwiaW5uZXJUZXh0Iiwic3BsaXQiLCJPYmplY3QiLCJhc3NpZ24iLCJuYW1lIiwidW5pdCIsIk51bWJlciIsInRvRml4ZWQiLCJwcm9ncmVzc19iYXJzIiwiZyIsInN1cGVyIiwidDEiLCJhIiwiY29uc29sZSIsImFzc2VydCIsImZpZWxkIiwiY2xhc3MiLCJzcmMiLCJlcnJvck1zZyIsImRhdGEiLCJ0MiIsInQzIiwidDQiLCJwIiwidDUiLCJiIiwidDYiLCJ0NyIsImsiLCJsb2ciLCJwYXJlbnROb2RlIiwidDgiLCJ0OSIsImVycm9yIiwiaW5wdXQiLCJpZCIsIm1hcCIsImVsIiwidDEwIiwiY2hlY2tlZCIsInQxMSIsImExIiwiYTIiLCJhciIsInJlc3VsdCIsImNvbmNhdCIsInQxMiIsImtpdHMiLCJraXRzX2h0bWwiLCJpIiwidDEzIiwidjEiLCJzdHIiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFLQSxNQUFNQSxvQkFBb0JDLE1BQ3hCQyxjQUNFLFNBQVNDLEVBQUVDLEdB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ckQsQ0FBQyxTQUFVLG9DQUFxQyxLQUFNLE1BQ3RELENBQUMsT0FBUSwyRUFBNEUsSUFBSyxPQUMxRixDQUFDLFFBQVMsd0NBQXlDLEtBQU0sTUFDekQsQ0FBQyxVQUFXLGdDQUFpQyxJQUFLLE1BQ2xELENBQUMsVUFBVyxxQ0FBc0MsSUFBSyxPQUN2RCxDQUFDLFdBQVkscUNBQXNDLElBQUssT0FDeEQsQ0FBQyxXQUFZLDJDQUE0QyxJQUFLLE1BQzlELENBQUMsWUFBYSwyQ0FBNEMsSUFBSyxNQUMvRCxDQUFDLFVBQVcsZ0JBQWlCLElBQUssU0E2SjNDM0MsRUFBUyxNQUFVLE9BQUk0QyIsImZpbGUiOiJJbnB1dHMvY3ljbGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbkBjbGFzcyBDdXN0b21lclByb2ZpbGVcclxuQGRlc2MgaXMgbmVlZGVkIHRvIGdldCBkYXRhIGZyb20gQ3ljbGVzIHBhZ2VcclxuKi9cclxuXHJcbmNsYXNzIEN5Y2xlc0lucHV0IGV4dGVuZHMgSW5wdXR7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIGZ1bmN0aW9uIHEocyl7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHFhKHMpe1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0YWtlX2dldEtpdChzLCB2LCByLCBraXQpe1xyXG4gICAgICBpZigha2l0KSB2YXIga2l0ID0gcShzKTtcclxuXHJcbiAgICAgIHZhciBuYW1lLCBwcmljZSwgcGNQcmljZSA9IDAsIHdlaWdodCwgcGNXZWlnaHQgPSAwLCBjb3VudCwgcHJvZHVjdHMgPSBbXSwgcHJfYmFyID0gW107XHJcblxyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KHIoa2l0LnF1ZXJ5U2VsZWN0b3IoXCJoNiBpbnB1dFtwbGFjZWhvbGRlcj0nQ291bnQnXVwiKS52YWx1ZSkpO1xyXG5cclxuICAgICAgbmFtZSA9IHIoa2l0LmdldEF0dHJpYnV0ZShcImRhdGEtbmFtZVwiKSk7XHJcbiAgICAgIGlmKGtpdC5xdWVyeVNlbGVjdG9yKFwiaDYgaW5wdXRbcGxhY2Vob2xkZXI9J1ByaWNlJ11cIikudmFsdWUpIHByaWNlID0gcGFyc2VGbG9hdChyKGtpdC5xdWVyeVNlbGVjdG9yKFwiaDYgaW5wdXRbcGxhY2Vob2xkZXI9J1ByaWNlJ11cIikudmFsdWUpKTtcclxuICAgICAgZWxzZSBwcmljZSA9IDA7XHJcbiAgICAgIHdlaWdodCA9IHBhcnNlRmxvYXQocihraXQucXVlcnlTZWxlY3RvcihcImg2IC53ZWlnaHRcIikuaW5uZXJIVE1MKSk7XHJcbiAgICAgIHByX2JhciA9IFtwYXJzZUludChraXQucXVlcnlTZWxlY3RvckFsbChcImg2IHByb2dyZXNzXCIpWzBdLnZhbHVlKSwgcGFyc2VJbnQoa2l0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJoNiBwcm9ncmVzc1wiKVsxXS52YWx1ZSldO1xyXG4gICAgICB2YXIgcHJvZHVjdHNfaHRtbCA9IEFycmF5LmZyb20oa2l0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdHMtY29udGFpbmVyIC5wcm9kdWN0XCIpKTtcclxuICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHByb2R1Y3RzX2h0bWwubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgIHZhciBwX25hbWUsIHBfdW5pdCwgcF9wcmljZSwgcF9jb3VudCwgcF93ZWlnaHQsIHByb2R1Y3RfaHRtbCA9IHByb2R1Y3RzX2h0bWxbal07XHJcblxyXG4gICAgICAgIHBfbmFtZSA9IHIocHJvZHVjdF9odG1sLnF1ZXJ5U2VsZWN0b3IoXCJkaXY6bnRoLWNoaWxkKDEpXCIpLmlubmVySFRNTCk7XHJcbiAgICAgICAgcF91bml0ID0gcihwcm9kdWN0X2h0bWwucXVlcnlTZWxlY3RvcihcImRpdjpudGgtY2hpbGQoMilcIikuaW5uZXJIVE1MKTtcclxuICAgICAgICBwX3ByaWNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ID0gcHJvZHVjdF9odG1sLnF1ZXJ5U2VsZWN0b3IoXCJkaXY6bnRoLWNoaWxkKDMpIHNlbGVjdFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXNlbGVjdCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0ge3NlbGVjdGVkOiBzZWxlY3QudmFsdWV9O1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oc2VsZWN0Lm9wdGlvbnMpLmZvckVhY2gob3AgPT4gcmVzW29wLnZhbHVlXSA9IHBhcnNlRmxvYXQob3AuaW5uZXJUZXh0LnNwbGl0KFwiLVwiKVsxXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIHBfY291bnQgPSBwYXJzZUludChyKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2IGlucHV0W3BsYWNlaG9sZGVyPSdDb3VudCddXCIpLnZhbHVlKSk7XHJcbiAgICAgICAgcF93ZWlnaHQgPSBwYXJzZUZsb2F0KHIocHJvZHVjdF9odG1sLnF1ZXJ5U2VsZWN0b3IoXCJkaXY6bnRoLWNoaWxkKDIpXCIpLmdldEF0dHJpYnV0ZShcImRhdGEtd2VpZ2h0XCIpKSk7XHJcblxyXG4gICAgICAgIHByb2R1Y3RzW3Byb2R1Y3RzLmxlbmd0aF0gPSB7bmFtZTogcF9uYW1lLCB1bml0OiBwX3VuaXQsIHByaWNlOiBwX3ByaWNlLCBjb3VudDogcF9jb3VudCwgd2VpZ2h0OiBwX3dlaWdodH07XHJcbiAgICAgICAgcGNQcmljZSArPSAodHlwZW9mIHBfcHJpY2UgPT0gXCJvYmplY3RcIj9wX3ByaWNlW3BfcHJpY2Uuc2VsZWN0ZWRdOiBwX3ByaWNlKSpwX2NvdW50O1xyXG4gICAgICAgIHBjV2VpZ2h0ICs9IHBfd2VpZ2h0KnBfY291bnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7cHJpY2U6IHByaWNlLCBwY1ByaWNlOk51bWJlcigocGNQcmljZSkudG9GaXhlZCgyKSksIHdlaWdodDogd2VpZ2h0LCBwY1dlaWdodDogTnVtYmVyKChwY1dlaWdodCkudG9GaXhlZCgyKSksIGNvdW50OiBjb3VudCwgcHJvZHVjdHM6IHByb2R1Y3RzLCBwcm9ncmVzc19iYXJzOiBwcl9iYXJ9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihnW1wiSW5wdXRcIl1bXCJjeWNsZXNcIl0pIHJldHVybiBnW1wiSW5wdXRcIl1bXCJjeWNsZXNcIl07XHJcblxyXG4gICAgY29uc3QgaW5wdXRzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFtcIlRibF9TbGN0XCIsIFwidGFibGUgdHIuc2VsZWN0ZWRcIiwgXCJ2XCIsIFwidDdcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQ19TbGN0XCIsIFwibGFiZWwuc2VsZWN0ZWRbZm9yXj1jeWNsZS1dXCIsIFwidlwiLCBcInQ3XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIlBfSURcIiwgXCIudy1wcm9kdWN0cyBmb3JtXCIsIFwidlwiLFwidDZcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiS19JRFwiLCBcIi53LWtpdHMgZm9ybVwiLCBcInZcIixcInQ2XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkNfSURcIiwgXCJzZWN0aW9uLmN5Y2xlcy1jb250YWluZXIgLmN5Y2xlXCIsIFwidlwiLCBcInQ2XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcImFkZF9jXCIsIFwiLmN5Y2xlcy10YWItY29udGFpbmVyIC5jb250cm9sbCBpbnB1dFtuYW1lPW5ldy1jeWNsZS1uYW1lXVwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJvcl9TRlwiLCBcIi5jeWNsZXMtY29udGFpbmVyIC53LW9yZGVycyBpbnB1dCNqcy1zZWFyY2gtZmllbGRcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wia3RfU0ZcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1raXRzIGlucHV0I2pzLXNlYXJjaC1maWVsZFwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJrdF9ObVwiLCBcIi5jeWNsZXMtY29udGFpbmVyIC53LWtpdHMgaW5wdXQjanMta2l0LW5hbWVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wia3RfUHJcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1raXRzIGlucHV0I2pzLWtpdC1wcmljZVwiLCBcInZcIiwgXCJ0M1wiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJrdF9UcFwiLCBcIi5jeWNsZXMtY29udGFpbmVyIC53LWtpdHMgaW5wdXQjanMta2l0LXR5cGVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wia3RfU3pcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1raXRzIGlucHV0I2pzLWtpdC1zaXplXCIsIFwidlwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcImt0X0RtXCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLncta2l0cyBpbnB1dCNqcy1raXQtZGltZW5zaW9uc1wiLCBcInZcIiwgXCJ0OFwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJrdF93XCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLncta2l0cyBpbnB1dCNqcy1raXQtd2VpZ2h0XCIsIFwidlwiLCBcInQzXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcImt0X2RcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1raXRzIHRleHRhcmVhI2pzLWtpdC1kZXNjcmlwdGlvblwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJrdF9wcnNcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1raXRzIC5raXRzIC5raXRcIiwgXCJ2XCIsIFwidDJcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wicHJfU0ZcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1wcm9kdWN0cyBpbnB1dCNqcy1zZWFyY2gtZmllbGRcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wicHJfTm1cIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1wcm9kdWN0cyBpbnB1dCNqcy1wcm9kdWN0LW5hbWVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wicHJfVW50XCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLnctcHJvZHVjdHMgc2VsZWN0I2pzLXByb2R1Y3QtdW5pdFwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJwcl9jXCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLnctcHJvZHVjdHMgdGFibGUjanMtcHJvZHVjdC1jb3VudC1zZXQgaW5wdXRcIiwgXCJ2XCIsIFwidDRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wicHJfcFwiLCBcIi5jeWNsZXMtY29udGFpbmVyIC53LXByb2R1Y3RzIHRhYmxlI2pzLXByb2R1Y3QtcHJpY2Utc2V0IGlucHV0XCIsIFwidlwiLCBcInQ0XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcInByX0RtXCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLnctcHJvZHVjdHMgaW5wdXQjanMtcHJvZHVjdC1kaW1lbnNpb25zXCIsIFwidlwiLCBcInQ4XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcInByX3dcIiwgXCIuY3ljbGVzLWNvbnRhaW5lciAudy1wcm9kdWN0cyBpbnB1dCNqcy1wcm9kdWN0LXdlaWdodFwiLCBcInZcIiwgXCJ0M1wiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJwcl9kXCIsIFwiLmN5Y2xlcy1jb250YWluZXIgLnctcHJvZHVjdHMgdGV4dGFyZWEjanMtcHJvZHVjdC1kZXNjcmlwdGlvblwiLCBcInZcIiwgXCJ0MVwiXSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfSURcIiwgXCIuYWxlcnQtd2luZG93XCIsIFwidlwiLCBcInQ2XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX1RlbFwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtdGVsZXBob25lc1wiLCBcInZcIiwgXCJ0OVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19TTVwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtc29jaWFsLW1lZGlhXCIsIFwidlwiLCBcInQ5XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX09OXCIsIFwiLmFsZXJ0LXdpbmRvdyB0ZXh0YXJlYSNqcy1vcmRlci1ub3Rlc1wiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19QclwiLCBcIi5hbGVydC13aW5kb3cgdGV4dGFyZWEjanMtb3JkZXItcHJlZmVyZW5jZXNcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfQWRyXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1hZGRyZXNzZXNcIiwgXCJ2XCIsIFwidDlcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfU3VtXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1zdW1tYXJ5XCIsIFwidlwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX0JpbGxcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLWlzLWJpbGxlZFwiLCBcInZcIiwgXCJ0MTBcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfUGF5XCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1vcmRlci1wYWlkXCIsIFwidjFcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19QXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1vcmRlci1wYXktZGF0ZSwgLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1vcmRlci1wYWlkXCIsIFwidlwiLCBcInQxMVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19QRFwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtb3JkZXItcGF5LWRhdGVcIiwgXCJ2MVwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX2NfaWRcIiwgXCIuYWxlcnQtd2luZG93IHNlbGVjdCNqcy1jeWNsZVwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19raXRzXCIsIFwiLmFsZXJ0LXdpbmRvdyAua2l0cyAua2l0Om5vdCguYWRkKVwiLCBcInZcIiwgXCJ0MTJcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfbl90aHNcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLWlzLW5vdC10aGlzXCIsIFwidlwiLCBcInQxMFwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19hbl9GTlwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtYW5vdGhlci1mdWxsLW5hbWVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfYW5fVGVsXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1hbm90aGVyLXRlbGVwaG9uZVwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJDc3RtX0lEXCIsIFwiLmFsZXJ0LXdpbmRvd1wiLCBcInZcIiwgXCJ0MTNcIl1cclxuICAgICAgICAgICAgICAgICAgXTtcclxuICAgIGNvbnN0IHRha2VzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidDFcIjogKHMsIHYsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAZGVzYyBnZXQgc3RyaW5nIGZyb20gaW5wdXQgb3IgdGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSByKHEocykudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYodihhKSkgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUuYXNzZXJ0KGZhbHNlLCB7ZmllbGQ6IHMgLGNsYXNzOiBcIkN5Y2xlc1wiLCBzcmM6IFwianMvSFRNTF9JbnB1dC9jdXN0b21lclByb2ZpbGUuanNcIiwgZXJyb3JNc2c6IFwiSW52YWxpZCBpbnB1dFwiLCBkYXRhOiBhfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQyXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IGtpdCBvYmplY3QgZnJvbSAuYWxlcnQtd2luZG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge09iamVjdH0gPT4ge3BjUHJpY2UsIHBjV2VpZ2h0LCBwcm9kdWN0czogW3tuYW1lLCB1bml0LCBwcmljZXw6e2tpdCwgd2hvbGVzYWxlLCBzaG9wLCByZXN0YXVyYW50LCBzZWxlY3RlZDogcHJpY2VfdHlwZX0sIGNvdW50LCB3ZWlnaHR9XSwgcHJvZ3Jlc3NfYmFyczogW3dlaWdodCwgdm9sdW1lXX1cclxuICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGtpdCA9IHEocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgcGNQcmljZSA9IDAsIHBjV2VpZ2h0ID0gMCwgcHJvZHVjdHMgPSBbXSwgcHJfYmFyID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJfYmFyID0gW3BhcnNlSW50KGtpdC5xdWVyeVNlbGVjdG9yQWxsKFwiaDYgcHJvZ3Jlc3NcIilbMF0udmFsdWUpLCBwYXJzZUludChraXQucXVlcnlTZWxlY3RvckFsbChcImg2IHByb2dyZXNzXCIpWzFdLnZhbHVlKV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzX2h0bWwgPSBraXQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0cy1jb250YWluZXIgLnByb2R1Y3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgcHJvZHVjdHNfaHRtbC5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwX25hbWUsIHBfdW5pdCwgcF9wcmljZSwgcF9jb3VudCwgcF93ZWlnaHQsIHByb2R1Y3RfaHRtbCA9IHByb2R1Y3RzX2h0bWxbal07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwX25hbWUgPSByKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgxKVwiKS5pbm5lckhUTUwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwX3VuaXQgPSByKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgyKVwiKS5pbm5lckhUTUwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwX3ByaWNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgzKSBzZWxlY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSB7c2VsZWN0ZWQ6IHNlbGVjdC52YWx1ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oc2VsZWN0Lm9wdGlvbnMpLmZvckVhY2gob3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzW29wLnZhbHVlXSA9IHBhcnNlRmxvYXQob3AuaW5uZXJUZXh0LnNwbGl0KFwiLVwiKVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcF9wcmljZSA9IHBfcHJpY2U/cF9wcmljZTpwYXJzZUZsb2F0KHIocHJvZHVjdF9odG1sLnF1ZXJ5U2VsZWN0b3IoXCJkaXY6bnRoLWNoaWxkKDMpXCIpLmlubmVyVGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwX2NvdW50ID0gcGFyc2VGbG9hdChyKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2IGlucHV0W3BsYWNlaG9sZGVyPSdDb3VudCddXCIpLnZhbHVlKSkgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwX3dlaWdodCA9IHBhcnNlRmxvYXQocihwcm9kdWN0X2h0bWwucXVlcnlTZWxlY3RvcihcImRpdjpudGgtY2hpbGQoMilcIikuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWlnaHRcIikpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzW3Byb2R1Y3RzLmxlbmd0aF0gPSB7bmFtZTogcF9uYW1lLCB1bml0OiBwX3VuaXQsIHByaWNlOiBwX3ByaWNlLCBjb3VudDogcF9jb3VudCwgd2VpZ2h0OiBwX3dlaWdodH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY1ByaWNlICs9IChwX3ByaWNlW3BfcHJpY2VbXCJzZWxlY3RlZFwiXV0gfCBwX3ByaWNlKSpwX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY1dlaWdodCArPSBwX3dlaWdodCpwX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7cGNQcmljZTpwY1ByaWNlLCBwY1dlaWdodDogcGNXZWlnaHQsIHByb2R1Y3RzOiBwcm9kdWN0cywgcHJvZ3Jlc3NfYmFyczogcHJfYmFyfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQzXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IGZsb2F0IGZyb20gaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgQHJldHVybiB7RmxvYXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHIocShzKS52YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0NFwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBkZXNjIGdldCBhcnJheSBvZiBmbG9hdHMgZnJvbSBzZXQgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge09iamVjdDxTdHJpbmc6IEZsb2F0Pn0gPT4ge1wiZGF0YS10eXBlXCI6IFwidmFsdWVcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgcWEocykuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYVtyKHAuZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpKV0gPSBwYXJzZUZsb2F0KHIocC52YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwidDVcIjogKHMsIHYsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAZGVzYyBnZXQgYXJyYXkgb2YgMyBmbG9hdHMgZnJvbSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAcmV0dXJuIHtBcnJheTxGbG9hdD59ID0+IFtGbG9hdCwgRmxvYXQsIEZsb2F0XVxyXG4gICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gW10sIGIgPSByKHEocykpLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGFbMF0gPSBwYXJzZUZsb2F0KGJbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYVsxXSA9IHBhcnNlRmxvYXQoYlsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhWzJdID0gcGFyc2VGbG9hdChiWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0NlwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHIocShzKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQ3XCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgayA9IHEocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrLCBzKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrP1trLnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSwgcGFyc2VJbnQoay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpKSwga106W107XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQ4XCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihxKHMpLnZhbHVlKS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQ5XCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IHN0cmluZyBhbmQgYXJyYXkgb2Ygc3RyaW5nIGZyb20gaW5wdXQgYW5kIGl0cyBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSA9PiBbXCJ2YWwxXCIsIFwidmFsMlwiXSB3aGVyZSBmaXJzdCBlbGVtZW50IG9mIGFycmF5IGlzIGZyb20gaW5wdXQgYW5kIG90aGVyIGZyb20gaHRtbC1hcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSByKHEocykudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoIXYoYSkpIGNvbnNvbGUuZXJyb3Ioe2ZpZWxkOiBzICxjbGFzczogXCJDdXN0b21lclByb2ZpbGVcIiwgc3JjOiBcImpzL0hUTUxfSW5wdXQvY3VzdG9tZXJQcm9maWxlLmpzXCIsIGVycm9yTXNnOiBcIkludmFsaWQgaW5wdXRcIiwgaW5wdXQ6IGF9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBxKHMpLmdldEF0dHJpYnV0ZShcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXIgPSBBcnJheS5mcm9tKHEocykucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIGlkICsgXCItY29udGFpbmVyIC5jaGlwIGNoaXBcIikpLm1hcChlbCA9PiByKGVsLmlubmVySFRNTCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYSwgYXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0MTBcIjogKHMsIHYsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAZGVzYyBnZXQgYm9vbGVhbiBmcm9tIGlucHV0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKHEocykuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQxMVwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBkZXNjIGdldCBzdHJpbmcgYW5kIGFycmF5IG9mIGFycmF5IG9mIDIgc3RyaW5ncyBmcm9tIGlucHV0cyBhbmQgdGhlaXIgYXJyYXlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge0FycmF5PEFycmF5PFN0cmluZz4+fSA9PiBbW1widmFsMVwiLCBcInZhbDJcIl0sW1widmFsMVwiLCBcInZhbDJcIl1dIHdoZXJlIGZpcnN0IGVsZW1lbnQgb2YgYXJyYXkgaXMgZnJvbSBpbnB1dCBhbmQgb3RoZXIgZnJvbSBodG1sLWFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGExID0gcihxYShzKVswXS52YWx1ZSksIGEyID0gcihxYShzKVsxXS52YWx1ZSksIGIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKCF2KGExKSB8fCAhdihhMikpIHRocm93IHtmaWVsZDogcyAsY2xhc3M6IFwiQ3VzdG9tZXJQcm9maWxlXCIsIHNyYzogXCJqcy9IVE1MX0lucHV0L2N1c3RvbWVyUHJvZmlsZS5qc1wiLCBlcnJvck1zZzogXCJJbnZhbGlkIGlucHV0XCIsIGlucHV0OiBbYTEsIGEyXX07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gcShzKS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyID0gQXJyYXkuZnJvbShxKHMpLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoaXAgY2hpcFwiKSkubWFwKGVsID0+IHIoZWwuaW5uZXJIVE1MKS5zcGxpdChcIiAtIFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0LCBpbnAgPSBbW2ExLCBhMl1dXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnAuY29uY2F0KGFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQxMlwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBkZXNjIGdldCBraXRzIG9iamVjdC1hcnJheSB3aXRoIGtpdHMgb2JqZWN0cyBmcm9tIC5hbGVydC13aW5kb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgQHJldHVybiB7T2JqZWN0fSA9PiB7a2l0X25hbWU6e2NvdW50LCBwcmljZSwgcGNQcmljZSwgd2VpZ2h0LCBwY1dlaWdodCwgcHJvZHVjdHM6IFt7bmFtZSwgdW5pdCwgcHJpY2V8OntraXQsIHdob2xlc2FsZSwgc2hvcCwgcmVzdGF1cmFudCwgc2VsZWN0ZWQ6IHByaWNlX3R5cGV9LCBjb3VudCwgd2VpZ2h0fV0sIHByb2dyZXNzX2JhcnM6IFt3ZWlnaHQsIHZvbHVtZV19fVxyXG4gICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBraXRzID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBraXRzX2h0bWwgPSBBcnJheS5mcm9tKHFhKHMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwga2l0c19odG1sLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBwYXJzZUludChyKGtpdHNfaHRtbFtpXS5xdWVyeVNlbGVjdG9yKFwiaDYgaW5wdXRbcGxhY2Vob2xkZXI9J0NvdW50J11cIikudmFsdWUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvdW50IDwgMSB8fCAhY291bnQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBraXRzW3Ioa2l0c19odG1sW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtbmFtZVwiKSldID0gdGFrZV9nZXRLaXQocywgdiwgciwga2l0c19odG1sW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2l0cztcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwidDEzXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQocihxKHMpLmdldEF0dHJpYnV0ZShcImRhdGEtY3VzdG9tZXItaWRcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBjb25zdCB2YWxpZGF0b3JzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZcIjogKCkgPT4gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2MVwiOiBzdHIgPT4gc3RyICE9PSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgIHN1cGVyKHRha2VzLCB2YWxpZGF0b3JzLCBpbnB1dHMpO1xyXG5cclxuICAgIHJldHVybiBnW1wiSW5wdXRcIl1bXCJjeWNsZXNcIl0gPSB0aGlzO1xyXG4gIH1cclxufVxyXG4iXX0=
