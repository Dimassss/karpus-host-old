class CustomerProfileInput extends Input{constructor(){function e(e){return document.querySelector(e)}function t(e){return document.querySelectorAll(e)}if(g.Input.customerProfile)return g.Input.customerProfile;function r(t,r,o,l){if(!l)l=e(t);var s,i,n,a,u=0,c=0,d=[];n=parseInt(o(l.querySelector("h6 input[placeholder='Count']").value)),o(l.getAttribute("data-name")),s=l.querySelector("h6 input[placeholder='Price']").value?parseFloat(o(l.querySelector("h6 input[placeholder='Price']").value)):0,i=parseFloat(o(l.querySelector("h6 .weight").innerHTML)),a=[parseInt(l.querySelectorAll("h6 progress")[0].value),parseInt(l.querySelectorAll("h6 progress")[1].value)];for(var p=Array.from(l.querySelectorAll(".products-container .product")),v=0;v<p.length;v++){var m,f,h,P,_,w=p[v];m=o(w.querySelector("div:nth-child(1)").innerHTML),f=o(w.querySelector("div:nth-child(2)").innerHTML),h=(()=>{var e=w.querySelector("div:nth-child(3) select");if(e){var t={selected:e.value};return Array.from(e.options).forEach(e=>t[e.value]=parseFloat(e.innerText.split("-")[1])),Object.assign({},t)}})(),P=parseInt(o(w.querySelector("div input[placeholder='Count']").value)),_=parseFloat(o(w.querySelector("div:nth-child(2)").getAttribute("data-weight"))),d[d.length]={name:m,unit:f,price:h,count:P,weight:_},u+=("object"==typeof h?h[h.selected]:h)*P,c+=_*P}return Object.assign({},{price:s,pcPrice:Number(u.toFixed(2)),weight:i,pcWeight:Number(c.toFixed(2)),count:n,products:d,progress_bars:a})}return super({t1:(t,r,o)=>{const l=o(e(t).value);if(r(l))return l;console.assert(!1,{field:t,class:"CustomerProfile",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input"})},t2:(t,r,o)=>o(e(t).checked),t3:(e,o,l)=>{const s={},i=Array.from(t(e));for(var n=0;n<i.length;n++){const t=parseInt(l(i[n].querySelector("h6 input[placeholder='Count']").value));t<1||!t||(s[l(i[n].getAttribute("data-name"))]=r(e,0,l,i[n]))}return s},t4:r,t5:(t,r,o)=>{const l=o(e(t).value);r(l)||console.error({field:t,class:"CustomerProfile",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input",input:l});let s=e(t).getAttribute("id");return[l,...Array.from(e(t).parentNode.parentNode.parentNode.querySelectorAll("."+s+"-container .chip chip")).map(e=>o(e.innerHTML))]},t6:(r,o,l)=>{const s=l(t(r)[0].value),i=l(t(r)[1].value);if(!o(s)||!o(i))throw{field:r,class:"CustomerProfile",src:"js/HTML_Input/customerProfile.js",errorMsg:"Invalid input",input:[s,i]};e(r).getAttribute("id");const n=Array.from(e(r).parentNode.parentNode.querySelectorAll(".chip chip")).map(e=>l(e.innerHTML).split(" - "));let a;return a=[[s,i]].concat(n),a},t7:(t,r,o)=>parseInt(o(e(t).getAttribute("data-id"))),t8:(t,r,o)=>e(t),t9:(t,r,o)=>{let l=e(t);return l?[l.parentNode.parentNode.getAttribute("id"),parseInt(l.getAttribute("data-id")),l]:[]},t10:(e,r,o)=>t(e)},{v:()=>!0,v1:e=>""!==e},[["TblC_Slct","table#customers .selected","v","t9"],["TblO_Slct","table#customer_orders .selected","v","t9"],["Tbl_rows","table#customers tbody tr","v","t10"],["NT_SF",".customerProfile input[name=js-customer-nav-table-search]","v","t1"],["WP_ID",".customerProfile","v","t7"],["WP_SC",".customerProfile table#customers tr.selected","t8"],["WP_SC",".customerProfile table#customers tr.selected","v","t8"],["WP_Nm",".customerProfile input#js-full-name","v","t1"],["WP_Tel",".customerProfile input#js-telephones","v1","t5"],["WP_Adr",".customerProfile input#js-addresses","v1","t5"],["WP_E-m",".customerProfile input#js-e-mail","v","t1"],["WP_Nt",".customerProfile textarea#js-notes","v","t1"],["WP_Pr",".customerProfile textarea#js-preferences","v","t1"],["WP_SM",".customerProfile input#js-social-medias","v1","t5"],["WP_Act",".customerProfile input#js-activity","v","t1"],["WO_SF",".customerProfile input[name=js-customer-order-table-search]","v","t1"],["WO_SO",".customerProfile table#customer_orders tr.selected","v","t8"],["AW_ID",".alert-window","v","t7"],["AW_Tel",".alert-window input#js-telephones","v","t5"],["AW_SM",".alert-window input#js-social-media","v","t5"],["AW_ON",".alert-window textarea#js-order-notes","v","t1"],["AW_Pr",".alert-window textarea#js-order-preferences","v","t1"],["AW_Adr",".alert-window input#js-addresses","v","t5"],["AW_Sum",".alert-window input#js-summary","v","t1"],["AW_Bill",".alert-window input#js-is-billed","v","t2"],["AW_Pay",".alert-window input#js-order-paid","v1","t1"],["AW_P",".alert-window input#js-order-pay-date, .alert-window input#js-order-paid","v","t6"],["AW_PD",".alert-window input#js-order-pay-date","v1","t1"],["AW_c_id",".alert-window select#js-cycle","v","t1"],["AW_kits",".alert-window .kits .kit:not(.add)","v","t3"],["AW_n_ths",".alert-window input#js-is-not-this","v","t2"],["AW_an_FN",".alert-window input#js-another-full-name","v","t1"],["AW_an_Tel",".alert-window input#js-another-telephone","v","t1"]]),g.Input.customerProfile=this}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIklucHV0cy9jdXN0b21lclByb2ZpbGUuanMiXSwibmFtZXMiOlsiQ3VzdG9tZXJQcm9maWxlSW5wdXQiLCJJbnB1dCIsIltvYmplY3QgT2JqZWN0XSIsInEiLCJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicWEiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZyIsInRha2VfZ2V0S2l0IiwidiIsInIiLCJraXQiLCJwcmljZSIsIndlaWdodCIsImNvdW50IiwicHJfYmFyIiwicGNQcmljZSIsInBjV2VpZ2h0IiwicHJvZHVjdHMiLCJwYXJzZUludCIsInZhbHVlIiwiZ2V0QXR0cmlidXRlIiwicGFyc2VGbG9hdCIsImlubmVySFRNTCIsInByb2R1Y3RzX2h0bWwiLCJBcnJheSIsImZyb20iLCJqIiwibGVuZ3RoIiwicF9uYW1lIiwicF91bml0IiwicF9wcmljZSIsInBfY291bnQiLCJwX3dlaWdodCIsInByb2R1Y3RfaHRtbCIsInNlbGVjdCIsInJlcyIsInNlbGVjdGVkIiwib3B0aW9ucyIsImZvckVhY2giLCJvcCIsImlubmVyVGV4dCIsInNwbGl0IiwiT2JqZWN0IiwiYXNzaWduIiwibmFtZSIsInVuaXQiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NfYmFycyIsInN1cGVyIiwidDEiLCJhIiwiY29uc29sZSIsImFzc2VydCIsImZpZWxkIiwiY2xhc3MiLCJzcmMiLCJlcnJvck1zZyIsInQyIiwiY2hlY2tlZCIsInQzIiwia2l0cyIsImtpdHNfaHRtbCIsImkiLCJ0NCIsInQ1IiwiZXJyb3IiLCJpbnB1dCIsImlkIiwicGFyZW50Tm9kZSIsIm1hcCIsImVsIiwidDYiLCJhMSIsImEyIiwiYXIiLCJyZXN1bHQiLCJjb25jYXQiLCJ0NyIsInQ4IiwidDkiLCJrIiwidDEwIiwidjEiLCJzdHIiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFJQSxNQUFNQSw2QkFBNkJDLE1BQ2pDQyxjQUNFLFNBQVNDLEVBQUVDLEdBQ1QsT0FBT0MsU0FBU0MsY0FBY0Ys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Uyx3Q0FBeUMsSUFBSyxNQUN4RCxDQUFDLFFBQVMsOENBQStDLElBQUssTUFDOUQsQ0FBQyxTQUFVLG1DQUFvQyxJQUFLLE1BQ3BELENBQUMsU0FBVSxpQ0FBa0MsSUFBSyxNQUNsRCxDQUFDLFVBQVcsbUNBQW9DLElBQUssTUFDckQsQ0FBQyxTQUFVLG9DQUFxQyxLQUFNLE1BQ3RELENBQUMsT0FBUSwyRUFBNEUsSUFBSyxNQUMxRixDQUFDLFFBQVMsd0NBQXlDLEtBQU0sTUFDekQsQ0FBQyxVQUFXLGdDQUFpQyxJQUFLLE1BQ2xELENBQUMsVUFBVyxxQ0FBc0MsSUFBSyxNQUN2RCxDQUFDLFdBQVkscUNBQXNDLElBQUssTUFDeEQsQ0FBQyxXQUFZLDJDQUE0QyxJQUFLLE1BQzlELENBQUMsWUFBYSwyQ0FBNEMsSUFBSyxRQTZGeEU5RSxFQUFTLE1BQW1CLGdCQUFJK0UiLCJmaWxlIjoiSW5wdXRzL2N1c3RvbWVyUHJvZmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG5AY2xhc3MgQ3VzdG9tZXJQcm9maWxlXHJcbkBkZXNjIGlzIG5lZWRlZCB0byBnZXQgZGF0YSBmcm9tIEN1c3RvbWVyUHJvZmlsZSBwYWdlXHJcbiovXHJcbmNsYXNzIEN1c3RvbWVyUHJvZmlsZUlucHV0IGV4dGVuZHMgSW5wdXR7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIGZ1bmN0aW9uIHEocyl7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHFhKHMpe1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihnW1wiSW5wdXRcIl1bXCJjdXN0b21lclByb2ZpbGVcIl0pIHJldHVybiBnW1wiSW5wdXRcIl1bXCJjdXN0b21lclByb2ZpbGVcIl07XHJcblxyXG4gICAgZnVuY3Rpb24gdGFrZV9nZXRLaXQocywgdiwgciwga2l0KXtcclxuICAgICAgaWYoIWtpdCkgdmFyIGtpdCA9IHEocyk7XHJcblxyXG4gICAgICB2YXIgbmFtZSwgcHJpY2UsIHBjUHJpY2UgPSAwLCB3ZWlnaHQsIHBjV2VpZ2h0ID0gMCwgY291bnQsIHByb2R1Y3RzID0gW10sIHByX2JhciA9IFtdO1xyXG5cclxuICAgICAgY291bnQgPSBwYXJzZUludChyKGtpdC5xdWVyeVNlbGVjdG9yKFwiaDYgaW5wdXRbcGxhY2Vob2xkZXI9J0NvdW50J11cIikudmFsdWUpKTtcclxuXHJcbiAgICAgIG5hbWUgPSByKGtpdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5hbWVcIikpO1xyXG4gICAgICBpZihraXQucXVlcnlTZWxlY3RvcihcImg2IGlucHV0W3BsYWNlaG9sZGVyPSdQcmljZSddXCIpLnZhbHVlKSBwcmljZSA9IHBhcnNlRmxvYXQocihraXQucXVlcnlTZWxlY3RvcihcImg2IGlucHV0W3BsYWNlaG9sZGVyPSdQcmljZSddXCIpLnZhbHVlKSk7XHJcbiAgICAgIGVsc2UgcHJpY2UgPSAwO1xyXG4gICAgICB3ZWlnaHQgPSBwYXJzZUZsb2F0KHIoa2l0LnF1ZXJ5U2VsZWN0b3IoXCJoNiAud2VpZ2h0XCIpLmlubmVySFRNTCkpO1xyXG4gICAgICBwcl9iYXIgPSBbcGFyc2VJbnQoa2l0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJoNiBwcm9ncmVzc1wiKVswXS52YWx1ZSksIHBhcnNlSW50KGtpdC5xdWVyeVNlbGVjdG9yQWxsKFwiaDYgcHJvZ3Jlc3NcIilbMV0udmFsdWUpXTtcclxuICAgICAgdmFyIHByb2R1Y3RzX2h0bWwgPSBBcnJheS5mcm9tKGtpdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2R1Y3RzLWNvbnRhaW5lciAucHJvZHVjdFwiKSk7XHJcbiAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBwcm9kdWN0c19odG1sLmxlbmd0aDsgaisrKXtcclxuICAgICAgICB2YXIgcF9uYW1lLCBwX3VuaXQsIHBfcHJpY2UsIHBfY291bnQsIHBfd2VpZ2h0LCBwcm9kdWN0X2h0bWwgPSBwcm9kdWN0c19odG1sW2pdO1xyXG5cclxuICAgICAgICBwX25hbWUgPSByKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgxKVwiKS5pbm5lckhUTUwpO1xyXG4gICAgICAgIHBfdW5pdCA9IHIocHJvZHVjdF9odG1sLnF1ZXJ5U2VsZWN0b3IoXCJkaXY6bnRoLWNoaWxkKDIpXCIpLmlubmVySFRNTCk7XHJcbiAgICAgICAgcF9wcmljZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgzKSBzZWxlY3RcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFzZWxlY3QpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHtzZWxlY3RlZDogc2VsZWN0LnZhbHVlfTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKHNlbGVjdC5vcHRpb25zKS5mb3JFYWNoKG9wID0+IHJlc1tvcC52YWx1ZV0gPSBwYXJzZUZsb2F0KG9wLmlubmVyVGV4dC5zcGxpdChcIi1cIilbMV0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICBwX2NvdW50ID0gcGFyc2VJbnQocihwcm9kdWN0X2h0bWwucXVlcnlTZWxlY3RvcihcImRpdiBpbnB1dFtwbGFjZWhvbGRlcj0nQ291bnQnXVwiKS52YWx1ZSkpO1xyXG4gICAgICAgIHBfd2VpZ2h0ID0gcGFyc2VGbG9hdChyKHByb2R1Y3RfaHRtbC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgyKVwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlaWdodFwiKSkpO1xyXG5cclxuICAgICAgICBwcm9kdWN0c1twcm9kdWN0cy5sZW5ndGhdID0ge25hbWU6IHBfbmFtZSwgdW5pdDogcF91bml0LCBwcmljZTogcF9wcmljZSwgY291bnQ6IHBfY291bnQsIHdlaWdodDogcF93ZWlnaHR9O1xyXG4gICAgICAgIHBjUHJpY2UgKz0gKHR5cGVvZiBwX3ByaWNlID09IFwib2JqZWN0XCI/cF9wcmljZVtwX3ByaWNlLnNlbGVjdGVkXTogcF9wcmljZSkqcF9jb3VudDtcclxuICAgICAgICBwY1dlaWdodCArPSBwX3dlaWdodCpwX2NvdW50O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwge3ByaWNlOiBwcmljZSwgcGNQcmljZTpOdW1iZXIoKHBjUHJpY2UpLnRvRml4ZWQoMikpLCB3ZWlnaHQ6IHdlaWdodCwgcGNXZWlnaHQ6IE51bWJlcigocGNXZWlnaHQpLnRvRml4ZWQoMikpLCBjb3VudDogY291bnQsIHByb2R1Y3RzOiBwcm9kdWN0cywgcHJvZ3Jlc3NfYmFyczogcHJfYmFyfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5wdXRzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFtcIlRibENfU2xjdFwiLCBcInRhYmxlI2N1c3RvbWVycyAuc2VsZWN0ZWRcIiwgXCJ2XCIsIFwidDlcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiVGJsT19TbGN0XCIsIFwidGFibGUjY3VzdG9tZXJfb3JkZXJzIC5zZWxlY3RlZFwiLCBcInZcIiwgXCJ0OVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJUYmxfcm93c1wiLCBcInRhYmxlI2N1c3RvbWVycyB0Ym9keSB0clwiLCBcInZcIiwgXCJ0MTBcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiTlRfU0ZcIiwgXCIuY3VzdG9tZXJQcm9maWxlIGlucHV0W25hbWU9anMtY3VzdG9tZXItbmF2LXRhYmxlLXNlYXJjaF1cIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiV1BfSURcIiwgXCIuY3VzdG9tZXJQcm9maWxlXCIsIFwidlwiLCBcInQ3XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIldQX1NDXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSB0YWJsZSNjdXN0b21lcnMgdHIuc2VsZWN0ZWRcIiwgXCJ0OFwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJXUF9TQ1wiLCBcIi5jdXN0b21lclByb2ZpbGUgdGFibGUjY3VzdG9tZXJzIHRyLnNlbGVjdGVkXCIsIFwidlwiLCBcInQ4XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIldQX05tXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSBpbnB1dCNqcy1mdWxsLW5hbWVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiV1BfVGVsXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSBpbnB1dCNqcy10ZWxlcGhvbmVzXCIsIFwidjFcIiwgXCJ0NVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJXUF9BZHJcIiwgXCIuY3VzdG9tZXJQcm9maWxlIGlucHV0I2pzLWFkZHJlc3Nlc1wiLCBcInYxXCIsIFwidDVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiV1BfRS1tXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSBpbnB1dCNqcy1lLW1haWxcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiV1BfTnRcIiwgXCIuY3VzdG9tZXJQcm9maWxlIHRleHRhcmVhI2pzLW5vdGVzXCIsIFwidlwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIldQX1ByXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSB0ZXh0YXJlYSNqcy1wcmVmZXJlbmNlc1wiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJXUF9TTVwiLCBcIi5jdXN0b21lclByb2ZpbGUgaW5wdXQjanMtc29jaWFsLW1lZGlhc1wiLCBcInYxXCIsIFwidDVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiV1BfQWN0XCIsIFwiLmN1c3RvbWVyUHJvZmlsZSBpbnB1dCNqcy1hY3Rpdml0eVwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJXT19TRlwiLCBcIi5jdXN0b21lclByb2ZpbGUgaW5wdXRbbmFtZT1qcy1jdXN0b21lci1vcmRlci10YWJsZS1zZWFyY2hdXCIsIFwidlwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIldPX1NPXCIsIFwiLmN1c3RvbWVyUHJvZmlsZSB0YWJsZSNjdXN0b21lcl9vcmRlcnMgdHIuc2VsZWN0ZWRcIiwgXCJ2XCIsIFwidDhcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfSURcIiwgXCIuYWxlcnQtd2luZG93XCIsIFwidlwiLCBcInQ3XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX1RlbFwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtdGVsZXBob25lc1wiLCBcInZcIiwgXCJ0NVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19TTVwiLCBcIi5hbGVydC13aW5kb3cgaW5wdXQjanMtc29jaWFsLW1lZGlhXCIsIFwidlwiLCBcInQ1XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX09OXCIsIFwiLmFsZXJ0LXdpbmRvdyB0ZXh0YXJlYSNqcy1vcmRlci1ub3Rlc1wiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19QclwiLCBcIi5hbGVydC13aW5kb3cgdGV4dGFyZWEjanMtb3JkZXItcHJlZmVyZW5jZXNcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfQWRyXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1hZGRyZXNzZXNcIiwgXCJ2XCIsIFwidDVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfU3VtXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1zdW1tYXJ5XCIsIFwidlwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX0JpbGxcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLWlzLWJpbGxlZFwiLCBcInZcIiwgXCJ0MlwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19QYXlcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLW9yZGVyLXBhaWRcIiwgXCJ2MVwiLCBcInQxXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX1BcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLW9yZGVyLXBheS1kYXRlLCAuYWxlcnQtd2luZG93IGlucHV0I2pzLW9yZGVyLXBhaWRcIiwgXCJ2XCIsIFwidDZcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfUERcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLW9yZGVyLXBheS1kYXRlXCIsIFwidjFcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19jX2lkXCIsIFwiLmFsZXJ0LXdpbmRvdyBzZWxlY3QjanMtY3ljbGVcIiwgXCJ2XCIsIFwidDFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfa2l0c1wiLCBcIi5hbGVydC13aW5kb3cgLmtpdHMgLmtpdDpub3QoLmFkZClcIiwgXCJ2XCIsIFwidDNcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiQVdfbl90aHNcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLWlzLW5vdC10aGlzXCIsIFwidlwiLCBcInQyXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFtcIkFXX2FuX0ZOXCIsIFwiLmFsZXJ0LXdpbmRvdyBpbnB1dCNqcy1hbm90aGVyLWZ1bGwtbmFtZVwiLCBcInZcIiwgXCJ0MVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBbXCJBV19hbl9UZWxcIiwgXCIuYWxlcnQtd2luZG93IGlucHV0I2pzLWFub3RoZXItdGVsZXBob25lXCIsIFwidlwiLCBcInQxXCJdXHJcbiAgICAgICAgICAgICAgICAgIF07XHJcbiAgICBjb25zdCB0YWtlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcInQxXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IHN0cmluZyBmcm9tIGlucHV0IG9yIHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHIocShzKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZih2KGEpKSByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5hc3NlcnQoZmFsc2UsIHtmaWVsZDogcyAsY2xhc3M6IFwiQ3VzdG9tZXJQcm9maWxlXCIsIHNyYzogXCJqcy9IVE1MX0lucHV0L2N1c3RvbWVyUHJvZmlsZS5qc1wiLCBlcnJvck1zZzogXCJJbnZhbGlkIGlucHV0XCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwidDJcIjogKHMsIHYsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAZGVzYyBnZXQgYm9vbGVhbiBmcm9tIGlucHV0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKHEocykuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQzXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IGtpdHMgb2JqZWN0LWFycmF5IHdpdGgga2l0cyBvYmplY3RzIGZyb20gLmFsZXJ0LXdpbmRvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBAcmV0dXJuIHtPYmplY3R9ID0+IHtraXRfbmFtZTp7Y291bnQsIHByaWNlLCBwY1ByaWNlLCB3ZWlnaHQsIHBjV2VpZ2h0LCBwcm9kdWN0czogW3tuYW1lLCB1bml0LCBwcmljZXw6e2tpdCwgd2hvbGVzYWxlLCBzaG9wLCByZXN0YXVyYW50LCBzZWxlY3RlZDogcHJpY2VfdHlwZX0sIGNvdW50LCB3ZWlnaHR9XSwgcHJvZ3Jlc3NfYmFyczogW3dlaWdodCwgdm9sdW1lXX19XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpdHMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpdHNfaHRtbCA9IEFycmF5LmZyb20ocWEocykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBraXRzX2h0bWwubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IHBhcnNlSW50KHIoa2l0c19odG1sW2ldLnF1ZXJ5U2VsZWN0b3IoXCJoNiBpbnB1dFtwbGFjZWhvbGRlcj0nQ291bnQnXVwiKS52YWx1ZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnQgPCAxIHx8ICFjb3VudCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpdHNbcihraXRzX2h0bWxbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS1uYW1lXCIpKV0gPSB0YWtlX2dldEtpdChzLCB2LCByLCBraXRzX2h0bWxbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBraXRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICBAZGVzYyBnZXQga2l0IG9iamVjdCBmcm9tIC5hbGVydC13aW5kb3dcclxuICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge09iamVjdH0gPT4ge3BjUHJpY2UsIHBjV2VpZ2h0LCBwcm9kdWN0czogW3tuYW1lLCB1bml0LCBwcmljZSwgY291bnQsIHdlaWdodH1dLCBwcm9ncmVzc19iYXJzOiBbd2VpZ2h0LCB2b2x1bWVdfVxyXG4gICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0NFwiOiB0YWtlX2dldEtpdCxcclxuICAgICAgICAgICAgICAgICAgICBcInQ1XCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGRlc2MgZ2V0IHN0cmluZyBhbmQgYXJyYXkgb2Ygc3RyaW5nIGZyb20gaW5wdXQgYW5kIGl0cyBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSA9PiBbXCJ2YWwxXCIsIFwidmFsMlwiXSB3aGVyZSBmaXJzdCBlbGVtZW50IG9mIGFycmF5IGlzIGZyb20gaW5wdXQgYW5kIG90aGVyIGZyb20gaHRtbC1hcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSByKHEocykudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoIXYoYSkpIGNvbnNvbGUuZXJyb3Ioe2ZpZWxkOiBzICxjbGFzczogXCJDdXN0b21lclByb2ZpbGVcIiwgc3JjOiBcImpzL0hUTUxfSW5wdXQvY3VzdG9tZXJQcm9maWxlLmpzXCIsIGVycm9yTXNnOiBcIkludmFsaWQgaW5wdXRcIiwgaW5wdXQ6IGF9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBxKHMpLmdldEF0dHJpYnV0ZShcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXIgPSBBcnJheS5mcm9tKHEocykucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIGlkICsgXCItY29udGFpbmVyIC5jaGlwIGNoaXBcIikpLm1hcChlbCA9PiByKGVsLmlubmVySFRNTCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYSwgLi4uYXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0NlwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBkZXNjIGdldCBzdHJpbmcgYW5kIGFycmF5IG9mIGFycmF5IG9mIDIgc3RyaW5ncyBmcm9tIGlucHV0cyBhbmQgdGhlaXIgYXJyYXlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEByZXR1cm4ge0FycmF5PEFycmF5PFN0cmluZz4+fSA9PiBbW1widmFsMVwiLCBcInZhbDJcIl0sW1widmFsMVwiLCBcInZhbDJcIl1dIHdoZXJlIGZpcnN0IGVsZW1lbnQgb2YgYXJyYXkgaXMgZnJvbSBpbnB1dCBhbmQgb3RoZXIgZnJvbSBodG1sLWFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGExID0gcihxYShzKVswXS52YWx1ZSksIGEyID0gcihxYShzKVsxXS52YWx1ZSksIGIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKCF2KGExKSB8fCAhdihhMikpIHRocm93IHtmaWVsZDogcyAsY2xhc3M6IFwiQ3VzdG9tZXJQcm9maWxlXCIsIHNyYzogXCJqcy9IVE1MX0lucHV0L2N1c3RvbWVyUHJvZmlsZS5qc1wiLCBlcnJvck1zZzogXCJJbnZhbGlkIGlucHV0XCIsIGlucHV0OiBbYTEsIGEyXX07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gcShzKS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyID0gQXJyYXkuZnJvbShxKHMpLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoaXAgY2hpcFwiKSkubWFwKGVsID0+IHIoZWwuaW5uZXJIVE1MKS5zcGxpdChcIiAtIFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0LCBpbnAgPSBbW2ExLCBhMl1dXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnAuY29uY2F0KGFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInQ3XCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQocihxKHMpLmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwidDhcIjogKHMsIHYsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0OVwiOiAocywgdiwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGsgPSBxKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGs/W2sucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImlkXCIpLCBwYXJzZUludChrLmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIikpLCBrXTpbXTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwidDEwXCI6IChzLCB2LCByKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcWEocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgY29uc3QgdmFsaWRhdG9ycyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2XCI6ICgpID0+IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidjFcIjogc3RyID0+IHN0ciAhPT0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICBzdXBlcih0YWtlcywgdmFsaWRhdG9ycywgaW5wdXRzKTtcclxuXHJcbiAgICByZXR1cm4gZ1tcIklucHV0XCJdW1wiY3VzdG9tZXJQcm9maWxlXCJdID0gdGhpcztcclxuICB9XHJcbn1cclxuIl19
